<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>React Native入门总结 - Francis Wang's blog</title> <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <script type="text/javascript" src="/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.7.1 --> <title>React Native入门总结 | Francis Wang’s blog</title> <meta name="generator" content="Jekyll v3.9.0" /> <meta property="og:title" content="React Native入门总结" /> <meta property="og:locale" content="en_US" /> <link rel="canonical" href="http://next.yanqiw.qianyitian.com/docs/react-native/2016-05-12-react-native-guide.html" /> <meta property="og:url" content="http://next.yanqiw.qianyitian.com/docs/react-native/2016-05-12-react-native-guide.html" /> <meta property="og:site_name" content="Francis Wang’s blog" /> <meta property="og:type" content="article" /> <meta property="article:published_time" content="2016-05-12T15:03:57+08:00" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="React Native入门总结" /> <script type="application/ld+json"> {"headline":"React Native入门总结","dateModified":"2016-05-12T15:03:57+08:00","datePublished":"2016-05-12T15:03:57+08:00","url":"http://next.yanqiw.qianyitian.com/docs/react-native/2016-05-12-react-native-guide.html","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://next.yanqiw.qianyitian.com/assets/images/just-the-docs.png"}},"mainEntityOfPage":{"@type":"WebPage","@id":"http://next.yanqiw.qianyitian.com/docs/react-native/2016-05-12-react-native-guide.html"},"@type":"BlogPosting","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="http://next.yanqiw.qianyitian.com/" class="site-title lh-tight"> <div class="site-logo"></div> </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="http://next.yanqiw.qianyitian.com/docs/2021-08-01-k8s-cookbook.html" class="nav-list-link">k8s 自制手册</a></li><li class="nav-list-item"><a href="http://next.yanqiw.qianyitian.com/docs/2021-09-11-k8s-crash.html" class="nav-list-link">k8s 崩溃修复</a></li><li class="nav-list-item"><a href="http://next.yanqiw.qianyitian.com/docs/2017-05-11-cyq-containerlize-practice.html" class="nav-list-link">餐饮圈后端容器化实践</a></li><li class="nav-list-item"><a href="http://next.yanqiw.qianyitian.com/docs/2016-02-21-schedule-task-in-docker.html" class="nav-list-link">在docker container中启动定时任务</a></li><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://next.yanqiw.qianyitian.com/docs/react-native/2016-05-12-react-native-guide.html" class="nav-list-link active">React Native入门总结</a><ul class="nav-list "><li class="nav-list-item "><a href="http://next.yanqiw.qianyitian.com/docs/react-native/2016-03-05-use-docker-build-reactjs.html" class="nav-list-link">使用docker创建ReactJS开发环境，实时编译JSX</a></li><li class="nav-list-item "><a href="http://next.yanqiw.qianyitian.com/docs/react-native/2017-03-05-redux-saga.html" class="nav-list-link">Redux Saga实践</a></li><li class="nav-list-item "><a href="http://next.yanqiw.qianyitian.com/docs/react-native/2018-02-11-aliyun-fc-RN-hotpatch-backend.html" class="nav-list-link">阿里函数计算实现简单React Native热更新后台</a></li><li class="nav-list-item "><a href="http://next.yanqiw.qianyitian.com/docs/react-native/2016-10-05-react-native-adopt-to-xcode8.html" class="nav-list-link">React Native 0.27.x adopt to xcode 8</a></li></ul></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Francis Wang's blog" aria-label="Search Francis Wang's blog" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="//www.github.com/yanqiw" class="site-button" > Github </a> </li> </ul> </nav> </div> <div id="main-content-wrap" class="main-content-wrap"> <div id="main-content" class="main-content" role="main"> <h1 id="react-native入门总结"> <a href="#react-native入门总结" class="anchor-heading" aria-labelledby="react-native入门总结"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> React Native入门总结 </h1> <p>用Javascript, HTML, CSS开发APP已经被谈论了很多年了，在<a href="https://facebook.github.io/react-native/">React Native</a>之前， <a href="https://cordova.apache.org/">Cordova</a>一直是首选， 在Cordova的基础上有很多优秀的框架，但是WebView的性能始终是纯H5技术的APP无法跨越的沟， 在用户体验至上的今天，性能问题变得尤为重要。 React Native通过编译将web的组件转换成native的组件，很大的提升了APP的性能。 目前，React Native支持Android和iOS两大主流平台，并被应用在很多知名项目中。</p> <p>下面是cordova和React Native的架构图，可以很容易看出两者的不同之处：</p> <h2 id="cordova架构"> <a href="#cordova架构" class="anchor-heading" aria-labelledby="cordova架构"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Cordova架构 </h2> <p><a href="https://cordova.apache.org/docs/en/latest/guide/overview/index.html">图片来自Cordova官网</a> <img src="https://cordova.apache.org/static/img/guide/cordovaapparchitecture.png" alt="Cordova架构" /></p> <h2 id="react-native架构"> <a href="#react-native架构" class="anchor-heading" aria-labelledby="react-native架构"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> React Native架构 </h2> <p><a href="http://www.ibm.com/developerworks/library/mo-bluemix-react-native-ios8/">图片来自React Native: Into a new world of rapid iOS development</a></p> <p><img src="http://www.ibm.com/developerworks/library/mo-bluemix-react-native-ios8/Figure1.png" alt="React Native架构" /></p> <h1 id="准备工作"> <a href="#准备工作" class="anchor-heading" aria-labelledby="准备工作"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 准备工作 </h1> <p>再开始React Native之前，需要准备安装：</p> <ul> <li>Node</li> <li>Android SKD (for android)</li> <li>Xcode (for iOS)</li> </ul> <h2 id="开发用具"> <a href="#开发用具" class="anchor-heading" aria-labelledby="开发用具"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 开发用具: </h2> <p>因为开发React Native用到的是Javascript，所以可选择的空间很大，首推的还是<a href="https://www.jetbrains.com/webstorm/">JetBrains</a>家的<a href="https://www.jetbrains.com/webstorm/">WebStorm</a>， 如果觉得太重GitHub家的<a href="https://atom.io/">Atom</a>也是不错的选择，加上Facebook新推出的插件<a href="http://nuclide.io/">Nuclide</a>也是很强大的。</p> <blockquote> <p>注意：在Windows上面有时候Atom会占用大量CPU资源，导致笔记本发热严重. 建议在windows上使用<a href="https://www.sublimetext.com/">Sublime</a>编辑器。</p> </blockquote> <p>Android开发推荐<a href="http://developer.android.com/intl/zh-cn/tools/studio/index.html">Android Studio</a>。</p> <p>iOS开发没得选，直接从App Store下载xCode。</p> <h2 id="安装react-native"> <a href="#安装react-native" class="anchor-heading" aria-labelledby="安装react-native"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 安装React Native </h2> <p>下面步骤基于<code class="language-plaintext highlighter-rouge">Mac OS X</code>系统。 对于其他操作系统，你可以参考<a href="https://facebook.github.io/react-native/docs/getting-started.html">React Native官网</a>安装</p> <h3 id="安装node"> <a href="#安装node" class="anchor-heading" aria-labelledby="安装node"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 安装Node </h3> <h4 id="安装homebrew"> <a href="#安装homebrew" class="anchor-heading" aria-labelledby="安装homebrew"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 安装Homebrew </h4> <p>在Mac上使用<code class="language-plaintext highlighter-rouge">brew</code>安装nodejs是非常方便的， 如果你已经有了<code class="language-plaintext highlighter-rouge">Homebrew</code>可以直接跳过这步。 打开Terminal运行：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/usr/bin/ruby <span class="nt">-e</span> <span class="s2">"</span><span class="si">$(</span>curl <span class="nt">-fsSL</span> https://raw.githubusercontent.com/Homebrew/install/master/install<span class="si">)</span><span class="s2">"</span>
</code></pre></div></div> <h4 id="安装node-1"> <a href="#安装node-1" class="anchor-heading" aria-labelledby="安装node-1"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 安装Node </h4> <p>React Native需要4.0以上的版本。Homebrew会安装最新的6.0版本。</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>npm <span class="nb">install</span> <span class="nt">-g</span> react-native-cli
</code></pre></div></div> <h3 id="安装android-studio"> <a href="#安装android-studio" class="anchor-heading" aria-labelledby="安装android-studio"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 安装Android Studio </h3> <p>在android stuido官网下载安装包并安装。安装后，需要下载SKD。选择：<code class="language-plaintext highlighter-rouge">Android Studio &gt; Preference &gt; System Settings &gt; Android SDK</code>中选择相应的android版本的SKD。</p> <blockquote> <p>建议使用5.0以上的Android版本用于开发和调试，稳定性会远高于4.0+版本。</p> </blockquote> <p>设置<code class="language-plaintext highlighter-rouge">ANDROID_HOME</code>环境变量，这部很重要，如果稍后React Native运行不了，多半是这里设置的不正确。 打开 <code class="language-plaintext highlighter-rouge">~/.bashrc</code>或<code class="language-plaintext highlighter-rouge">~/.bash_profile</code>, 如果没有运行</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">touch</span> ~/.bashrc <span class="c"># or ~/.bash_profile</span>
</code></pre></div></div> <p>在文件中输入下面命令：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># 如果SDK不是通过android studio安装的， 那么它可能在以下路径:</span>
<span class="c"># /usr/local/opt/android-sdk</span>
<span class="nb">export </span><span class="nv">ANDROID_HOME</span><span class="o">=</span>~/Library/Android/sdk
</code></pre></div></div> <h3 id="安装watchman"> <a href="#安装watchman" class="anchor-heading" aria-labelledby="安装watchman"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 安装Watchman </h3> <p>建议安装Watchman来监控文件夹变化, 自动触发一些事件</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>brew <span class="nb">install </span>watchman
</code></pre></div></div> <h3 id="安装genymotion"> <a href="#安装genymotion" class="anchor-heading" aria-labelledby="安装genymotion"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 安装Genymotion </h3> <p>强烈推荐的模拟器，可以方便的安装不同型号的Android手机模拟器。</p> <ul> <li>在<a href="https://www.genymotion.com/">Genymotion</a>官网注册账号</li> <li>登陆后在<a href="https://www.genymotion.com/download/"><code class="language-plaintext highlighter-rouge">下载页面</code></a>下载安装包</li> <li>根据说明安装</li> </ul> <h1 id="创建项目"> <a href="#创建项目" class="anchor-heading" aria-labelledby="创建项目"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 创建项目 </h1> <p>创建一个React Native项目很简单，至于要一行命令：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>react-native init AwesomeProject
<span class="nb">cd </span>AwesomeProject
npm <span class="nb">install</span>
</code></pre></div></div> <h2 id="运行android项目"> <a href="#运行android项目" class="anchor-heading" aria-labelledby="运行android项目"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 运行Android项目 </h2> <ul> <li>运行一个Genymotion的虚拟机</li> <li>在<code class="language-plaintext highlighter-rouge">AwesomeProject</code>文件夹下运行<code class="language-plaintext highlighter-rouge">react-native run-android</code></li> </ul> <p>刚刚初始化的项目会被编译并安装在虚拟机中， 在编辑器中打开<code class="language-plaintext highlighter-rouge">AwesomeProject</code>文件夹，就可以进行开发项目了。</p> <blockquote> <p>第一次启动时会下载依赖包，需要耐心等待很久。 根据网络情况，你可能需要设置代理才能完成下载。</p> </blockquote> <h2 id="运行ios项目"> <a href="#运行ios项目" class="anchor-heading" aria-labelledby="运行ios项目"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 运行iOS项目 </h2> <p>在<code class="language-plaintext highlighter-rouge">AwesomeProject</code>文件夹下运行<code class="language-plaintext highlighter-rouge">react-native run-ios</code>。</p> <h1 id="第一枪"> <a href="#第一枪" class="anchor-heading" aria-labelledby="第一枪"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 第一枪 </h1> <p>在虚拟设备上运行的时候，一切会很顺利，但是第一次将项目放到真实android设备中运行时，大多数人都会中上React Native的第一枪－<a href="https://github.com/facebook/react-native/issues/4952"><code class="language-plaintext highlighter-rouge">Can't find variable: _fbBatchedBridge</code></a>。</p> <p><img src="https://cloud.githubusercontent.com/assets/587438/11986090/a1a814d6-a999-11e5-8120-82a6391d0531.png" alt="Can't find variable: _fbBatchedBridge" /></p> <p>有时也可能是一个大白页面。</p> <p>解决办法也很简单，在<code class="language-plaintext highlighter-rouge">Dev setting</code>里面设置<code class="language-plaintext highlighter-rouge">电脑的IP:8081</code>，再刷新就可以解决。</p> <blockquote> <p>很多国内定制版的android系统不能通过menu键调出<code class="language-plaintext highlighter-rouge">Dev setting</code>。 这时需要在手机的<code class="language-plaintext highlighter-rouge">设置-&gt;应用-&gt;[项目app]-&gt;权限管理</code>中启动<code class="language-plaintext highlighter-rouge">显示悬浮窗口。 </code></p> </blockquote> <h1 id="修改项目"> <a href="#修改项目" class="anchor-heading" aria-labelledby="修改项目"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 修改项目 </h1> <h2 id="android"> <a href="#android" class="anchor-heading" aria-labelledby="android"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Android </h2> <p>使用之前介绍人任何一款编辑器打开<code class="language-plaintext highlighter-rouge">AwesomeProject</code>中的<code class="language-plaintext highlighter-rouge">index.android.js</code>,并加入自己的代码，开始你的项目。</p> <h2 id="ios"> <a href="#ios" class="anchor-heading" aria-labelledby="ios"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> iOS </h2> <p><code class="language-plaintext highlighter-rouge">index.ios.js</code>是iOS的入口文件，可以参考<a href="http://reactnative.cn/">React Native官方网站</a>进行项目开发，这里不过多介绍。</p> <h1 id="调试"> <a href="#调试" class="anchor-heading" aria-labelledby="调试"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 调试 </h1> <h2 id="在android模拟器上调试"> <a href="#在android模拟器上调试" class="anchor-heading" aria-labelledby="在android模拟器上调试"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 在Android模拟器上调试 </h2> <p>运行<code class="language-plaintext highlighter-rouge">Genymontion</code>选择一个模拟器运行。在项目路径运行<code class="language-plaintext highlighter-rouge">react-native run-android</code>。项目启动后，可以通过菜单模拟键调出开发者菜单，选择reload javascript来刷新修改后的代码。也可以开启调.试模式。</p> <blockquote> <p>开启调试模式的时候会弹出浏览器，这里需要手动打开<code class="language-plaintext highlighter-rouge">开发者工具</code>才能看到控制台和调试</p> </blockquote> <h2 id="在android设备上调试"> <a href="#在android设备上调试" class="anchor-heading" aria-labelledby="在android设备上调试"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 在Android设备上调试 </h2> <p>在Android设备上打开调试模式， 并将设备通过数据线连接到电脑上运行<code class="language-plaintext highlighter-rouge">react-native run-android</code>。</p> <blockquote> <p>请关闭其他android虚拟机，以避免安装应用到设备时出现错误。如果设备上启动应用后白屏，请参考<code class="language-plaintext highlighter-rouge">第一枪</code>这一段。</p> </blockquote> <h1 id="发布"> <a href="#发布" class="anchor-heading" aria-labelledby="发布"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 发布 </h1> <p>待续</p> <h1 id="后续反思"> <a href="#后续反思" class="anchor-heading" aria-labelledby="后续反思"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 后续反思 </h1> <p>待续</p> <hr> <h2 class="text-delta">Table of contents</h2> <ul> <li> <a href="http://next.yanqiw.qianyitian.com/docs/react-native/2016-03-05-use-docker-build-reactjs.html">使用docker创建ReactJS开发环境，实时编译JSX</a> </li> <li> <a href="http://next.yanqiw.qianyitian.com/docs/react-native/2017-03-05-redux-saga.html">Redux Saga实践</a> </li> <li> <a href="http://next.yanqiw.qianyitian.com/docs/react-native/2018-02-11-aliyun-fc-RN-hotpatch-backend.html">阿里函数计算实现简单React Native热更新后台</a> </li> <li> <a href="http://next.yanqiw.qianyitian.com/docs/react-native/2016-10-05-react-native-adopt-to-xcode8.html">React Native 0.27.x adopt to xcode 8</a> </li> </ul> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
