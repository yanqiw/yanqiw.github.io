<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Francis Wang's blog</title>
    <description></description>
    <link>http://frankwang.cn/</link>
    <atom:link href="http://frankwang.cn/feed.xml" rel="self" type="application/rss+xml"/>
    <pubDate>Sun, 08 Aug 2021 14:22:56 +0800</pubDate>
    <lastBuildDate>Sun, 08 Aug 2021 14:22:56 +0800</lastBuildDate>
    <generator>Jekyll v3.9.0</generator>
    
      <item>
        <title>k8s è‡ªåˆ¶æ‰‹å†Œ</title>
        <description>&lt;h1 id=&quot;k8s-è‡ªåˆ¶æ‰‹å†Œ&quot;&gt;k8s è‡ªåˆ¶æ‰‹å†Œ&lt;/h1&gt;
&lt;p&gt;è®°å½•åœ¨é˜¿é‡Œäº‘ä¸Šæ‰‹åŠ¨æ‹‰èµ·ä¸‰èŠ‚ç‚¹ k8s çš„æ­¥éª¤&lt;/p&gt;

&lt;h1 id=&quot;å¸¸ç”¨å‘½ä»¤&quot;&gt;å¸¸ç”¨å‘½ä»¤&lt;/h1&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;kubectl get pod &lt;span class=&quot;nt&quot;&gt;-n&lt;/span&gt; kube-system
kubectl get pod &lt;span class=&quot;nt&quot;&gt;-n&lt;/span&gt; calico-system &lt;span class=&quot;nt&quot;&gt;-o&lt;/span&gt; wide
kubectl get pod &lt;span class=&quot;nt&quot;&gt;-o&lt;/span&gt; wide
kubectl get nodes &lt;span class=&quot;nt&quot;&gt;-o&lt;/span&gt; wide

&lt;span class=&quot;c&quot;&gt;#  dashboard&lt;/span&gt;
kubectl &lt;span class=&quot;nt&quot;&gt;--namespace&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;kubernetes-dashboard get pod &lt;span class=&quot;nt&quot;&gt;-o&lt;/span&gt; wide | &lt;span class=&quot;nb&quot;&gt;grep &lt;/span&gt;dashboard

&lt;span class=&quot;c&quot;&gt;# delete node on control-panal&lt;/span&gt;
kubectl drain &amp;lt;node name&amp;gt; &lt;span class=&quot;nt&quot;&gt;--delete-local-data&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--force&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--ignore-daemonsets&lt;/span&gt;

&lt;span class=&quot;nb&quot;&gt;sudo rm&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-rf&lt;/span&gt; /etc/kubernetes/

ç”¨ pod è¿è¡Œä¸€ä¸ªshell
kubectl run &lt;span class=&quot;nt&quot;&gt;-it&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--rm&lt;/span&gt; busybox &lt;span class=&quot;nt&quot;&gt;--image&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;busybox &lt;span class=&quot;nt&quot;&gt;--&lt;/span&gt; sh
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h1 id=&quot;å®‰è£…-k8s-é›†ç¾¤&quot;&gt;å®‰è£… k8s é›†ç¾¤&lt;/h1&gt;

&lt;h2 id=&quot;è®¾ç½®é˜¿é‡Œäº‘æ™¯è±¡&quot;&gt;è®¾ç½®é˜¿é‡Œäº‘æ™¯è±¡&lt;/h2&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;apt update &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;apt &lt;span class=&quot;nb&quot;&gt;install&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-y&lt;/span&gt; apt-transport-https curl
curl &lt;span class=&quot;nt&quot;&gt;-s&lt;/span&gt; https://mirrors.aliyun.com/kubernetes/apt/doc/apt-key.gpg | &lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;apt-key add -
&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;deb https://mirrors.aliyun.com/kubernetes/apt/ kubernetes-xenial main&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt;/etc/apt/sources.list.d/kubernetes.list
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;å®‰è£…kubeå·¥å…·&quot;&gt;å®‰è£…kubeå·¥å…·&lt;/h2&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;apt-get &lt;span class=&quot;nb&quot;&gt;install&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-y&lt;/span&gt; kubelet kubeadm kubectl
&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;apt-mark hold kubelet kubeadm kubectl

kubeadm config images pull &lt;span class=&quot;nt&quot;&gt;--image-repository&lt;/span&gt; registry.aliyuncs.com/google_containers
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;å®‰è£…-master&quot;&gt;å®‰è£… master&lt;/h2&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;kubeadm init &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;--kubernetes-version&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;v1.21.2 &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;--image-repository&lt;/span&gt; registry.aliyuncs.com/google_containers  &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;--pod-network-cidr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;192.168.0.0/16 &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;--v&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;6
&lt;span class=&quot;nt&quot;&gt;--ignore-preflight-errors&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;all &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; å›  registry.aliyuncs.com/google_containers ä¸ºé˜¿é‡Œäº‘ä¸‰æ–¹ç”¨æˆ·ç»´æŠ¤ï¼ŒåŒæ­¥æ…¢ï¼Œæœ‰æ—¶æ— æ³•è·å¾—å¯¹åº”ç‰ˆæœ¬ï¼Œéœ€è¦ä»docker hub æ‹‰å–ï¼Œå¹¶é‡æ–° tag.
docker pull coredns/coredns:1.8.0
&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;docker tag 296a6d5035e2 registry.aliyuncs.com/google_containers/coredns:v1.8.0
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;å®‰è£…ç½‘ç»œæ’ä»¶&quot;&gt;å®‰è£…ç½‘ç»œæ’ä»¶&lt;/h2&gt;
&lt;blockquote&gt;
  &lt;p&gt;Calico æ€§èƒ½å¥½, ä½†é˜¿é‡Œäº‘åªèƒ½ä½¿ç”¨ IPIP æ¨¡å¼ï¼Œä¸ flannel æ¨¡å¼ä¸€è‡´ã€‚å»ºè®®ç›´æ¥ä½¿ç”¨Flannel 
ä¸€å®šè¦å…ˆé…ç½®ç½‘ç»œï¼Œå†åŠ å…¥èŠ‚ç‚¹ï¼ï¼ï¼ä¸€å®šè¦å…ˆé…ç½®ç½‘ç»œï¼Œå†åŠ å…¥èŠ‚ç‚¹ï¼ï¼ï¼ä¸€å®šè¦å…ˆé…ç½®ç½‘ç»œï¼Œå†åŠ å…¥èŠ‚ç‚¹ï¼ï¼ï¼
ä¸€å®šè¦å…³é—­ NetworkManager ï¼ï¼ï¼https://docs.projectcalico.org/maintenance/troubleshoot/troubleshooting#configure-networkmanager&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;å®‰è£…-calico-æœªæˆåŠŸé˜¿é‡Œäº‘ä¸Šå› ç½‘ç»œä¸æ”¯æŒcalico-å®‰è£…å¤±è´¥&quot;&gt;å®‰è£… calico [æœªæˆåŠŸï¼Œé˜¿é‡Œäº‘ä¸Šå› ç½‘ç»œä¸æ”¯æŒï¼Œcalico å®‰è£…å¤±è´¥]&lt;/h3&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;curl https://docs.projectcalico.org/manifests/calico.yaml &lt;span class=&quot;nt&quot;&gt;-O&lt;/span&gt;
kubectl apply &lt;span class=&quot;nt&quot;&gt;-f&lt;/span&gt; calico.yaml
&lt;span class=&quot;c&quot;&gt;# å¦‚æœ pod network é 192.168.0.0/16 éœ€è¦å…ˆä¸‹è½½ yaml ï¼Œæ‰‹åŠ¨é…ç½®åå¯åŠ¨&lt;/span&gt;
kubectl create &lt;span class=&quot;nt&quot;&gt;-f&lt;/span&gt; https://docs.projectcalico.org/manifests/custom-resources.yaml
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;å®‰è£…-flannel-é˜¿é‡Œäº‘å¯ç”¨&quot;&gt;å®‰è£… Flannel ã€é˜¿é‡Œäº‘å¯ç”¨ã€‘&lt;/h3&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;wget https://raw.githubusercontent.com/coreos/flannel/master/Documentation/kube-flannel.yml
&lt;span class=&quot;c&quot;&gt;#å¦‚æœymlä¸­çš„&quot;Network&quot;: &quot;10.244.0.0/16&quot;å’Œkubeadm init xxx --pod-network-cidrä¸ä¸€æ ·ï¼Œå°±éœ€è¦ä¿®æ”¹æˆä¸€æ ·çš„ã€‚ä¸ç„¶å¯èƒ½ä¼šä½¿å¾—Nodeé—´Cluster IPä¸é€šã€‚&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;å®‰è£…-kube-dashboard&quot;&gt;å®‰è£… kube-dashboard&lt;/h3&gt;
&lt;p&gt;Master èŠ‚ç‚¹è¿è¡Œï¼š&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;kubectl proxy 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ä»ç¬”è®°æœ¬è®¿é—®ï¼š&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;ssh &lt;span class=&quot;nt&quot;&gt;-L&lt;/span&gt; localhost:8001:localhost:8001 &lt;span class=&quot;nt&quot;&gt;-NT&lt;/span&gt; root@xcode-build.frankwang.cn &lt;span class=&quot;nt&quot;&gt;-i&lt;/span&gt; ~/.ssh/xcode-build-env@aliyun
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;è·å–-token&quot;&gt;è·å– Token&lt;/h3&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;kubectl &lt;span class=&quot;nt&quot;&gt;-n&lt;/span&gt; kube-system get secret|grep admin-token
kubectl &lt;span class=&quot;nt&quot;&gt;-n&lt;/span&gt; kube-system describe secret admin-token-vtg87
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;blockquote&gt;
  &lt;p&gt;ä¸‰èŠ‚ç‚¹æ—¶å…è®¸ master è¿è¡Œ Pod, æœ‰å®‰å…¨é£é™©ä»…å¯ç”¨äºå¼€å‘ï¼Œæµ‹è¯•ç¯å¢ƒ&lt;/p&gt;
  &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;kubectl taint nodes &lt;span class=&quot;nt&quot;&gt;--all&lt;/span&gt; node-role.kubernetes.io/master-
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;  &lt;/div&gt;
&lt;/blockquote&gt;

&lt;h1 id=&quot;elk-å®‰è£…-tips&quot;&gt;ELK å®‰è£… Tips&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;éœ€è¦åœ¨æ¯ä¸€å°æœºå™¨ä¸Šå®‰è£… nfs-common å·¥å…·: apt-get install nfs-common&lt;/li&gt;
  &lt;li&gt;éœ€è¦è®¾ç½®æ¯ä¸€å°æœºå™¨ sysctl -w vm.max_map_count=262144&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;è·å–è´¦å·--k&quot;&gt;è·å–è´¦å·  k&lt;/h2&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;PASSWORD&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;$(&lt;/span&gt;kubectl get secret quickstart-es-elastic-user &lt;span class=&quot;nt&quot;&gt;-o&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;jsonpath&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'{.data.elastic}'&lt;/span&gt; | &lt;span class=&quot;nb&quot;&gt;base64&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--decode&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$PASSWORD&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h1 id=&quot;reference&quot;&gt;Reference&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.cnblogs.com/xiao987334176/p/11317844.html&quot;&gt;K8s å®‰è£…&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://segmentfault.com/a/1190000023130407&quot;&gt;Dashboard å®‰è£…&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.toutiao.com/c/user/token/MS4wLjABAAAA0YFomuMNm87NNysXeUsQdI0Tt3gOgz8WG_0B3MzxsmI/?is_new_connect=0&amp;amp;is_new_user=0&amp;amp;tab=article&quot;&gt;K8s æ­å»ºstep by step&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/yanqiw/k8s-study-yaml&quot;&gt;k8s åŸºç¡€ç»„å»ºç›¸å…³éƒ¨ç½² YAML&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        <pubDate>Sun, 01 Aug 2021 17:32:00 +0800</pubDate>
        <link>http://frankwang.cn/post/2021/08/01/k8s-cookbook.html</link>
        <guid isPermaLink="true">http://frankwang.cn/post/2021/08/01/k8s-cookbook.html</guid>
        
        
        <category>post</category>
        
      </item>
    
      <item>
        <title>é˜¿é‡Œå‡½æ•°è®¡ç®—å®ç°ç®€å•React Nativeçƒ­æ›´æ–°åå°</title>
        <description>&lt;h1 id=&quot;é˜¿é‡Œå‡½æ•°è®¡ç®—å®ç°ç®€å•react-nativeçƒ­æ›´æ–°åå°&quot;&gt;é˜¿é‡Œå‡½æ•°è®¡ç®—å®ç°ç®€å•React Nativeçƒ­æ›´æ–°åå°&lt;/h1&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;å‡½æ•°è®¡ç®—&lt;/code&gt;ä½œä¸ºäº‘è®¡ç®—ä¸­æ–°ä¸€ä»£çš„è®¡ç®—å•å…ƒï¼Œæœ‰ç€ä¸éœ€è¦ç®¡ç†æœåŠ¡å™¨è®¾æ–½å’Œæ›´ç²¾å‡†çš„è®¡è´¹æ–¹å¼çš„ä¼˜åŠ¿ã€‚å®ƒä¾æ‰˜äºäº‘æœåŠ¡å•†çš„å¤šç§äº‘èµ„æºï¼ˆå¯¹è±¡å­˜å‚¨ï¼Œæ—¥å¿—æœåŠ¡ç­‰ï¼‰ï¼Œå°†éœ€è¦è®¡ç®—çš„ä¸šåŠ¡é€»è¾‘æµ“ç¼©åœ¨ä¸€ä¸ªå‡½æ•°ä¸­ï¼Œå¹¶åè°ƒå¤šç§å…¶ä»–äº‘èµ„æºã€‚æ”¶è´¹æ–¹å¼ä¹Ÿé‡‡ç”¨æŒ‰è°ƒç”¨æ¬¡æ•°å’Œè¿è¡Œæ—¶é—´ä¸ºè®¡è´¹å•ä½ï¼Œä½¿å¾—è®¡ç®—èµ„æºçš„è®¡è´¹æ›´ç²¾å‡†ã€‚å¯¹ç”¨æˆ·æ¥è¯´ï¼Œåœ¨ä¿è¯ä¸šåŠ¡æ­£å¸¸è¿è½¬çš„å‰æä¸‹ï¼ŒèŠ‚çœä¸‹ä¸å°‘ä¸šåŠ¡é—²æ—¶çš„æœåŠ¡å™¨æˆæœ¬ã€‚&lt;/p&gt;

&lt;p&gt;2014å¹´AWSå‘å¸ƒLambdaå‡½æ•°è®¡ç®—æœåŠ¡ï¼Œç»è¿‡å‡ å¹´çš„å‘å±•&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;å‡½æ•°è®¡ç®—&lt;/code&gt;ä¹Ÿè¶Šæ¥è¶Šå—åˆ°å¼€å‘è€…çš„å…³æ³¨ã€‚ 
2017å¹´ï¼Œé˜¿é‡Œäº‘å‘å¸ƒè‡ªå·±çš„&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;å‡½æ•°è®¡ç®—&lt;/code&gt;æœåŠ¡&lt;/p&gt;

&lt;p&gt;æœ¬æ–‡è®°å½•åŸºäºé˜¿é‡Œäº‘&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;å‡½æ•°è®¡ç®—&lt;/code&gt;æœåŠ¡ï¼Œç®€å•å®ç°appçƒ­æ›´æ–°åç«¯ã€‚&lt;/p&gt;

&lt;h1 id=&quot;ä¸ºä»€ä¹ˆä½¿ç”¨å‡½æ•°è®¡ç®—&quot;&gt;ä¸ºä»€ä¹ˆä½¿ç”¨å‡½æ•°è®¡ç®—&lt;/h1&gt;
&lt;p&gt;é˜¿é‡Œäº‘çš„å®˜æ–¹æ–‡æ¡£ä¸­ä»‹ç»äº†å‡ ç§å‡½æ•°è®¡ç®—é€‚ç”¨çš„åœºæ™¯ï¼š&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;åª’èµ„å†…å®¹åˆ†æå¤„ç†&lt;/strong&gt;ï¼šé€šè¿‡å¯¹è±¡å­˜å‚¨ä¸Šä¼ äº‹ä»¶å¯ä»¥è§¦å‘å¤šä¸ªå‡½æ•°ï¼Œå®Œæˆè½¬ç ã€å…ƒæ•°æ®æŠ½å–ç­‰åŠŸèƒ½ã€‚é€šè¿‡äº‹ä»¶è§¦å‘æœºåˆ¶ï¼Œæ‚¨èƒ½å¤Ÿå¿«é€Ÿæ•´åˆä¸åŒæœåŠ¡ï¼Œæ„å»ºä¸€ä¸ªå¼¹æ€§ã€é«˜å¯ç”¨çš„è§†é¢‘åç«¯ç³»ç»Ÿã€‚&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Severlessåç«¯æœåŠ¡&lt;/strong&gt;ï¼šå¯ä»¥ä½¿ç”¨ å‡½æ•°è®¡ç®—å’Œ APIç½‘å…³ æ„å»ºåç«¯ï¼Œä»¥éªŒè¯å’Œå¤„ç† API è¯·æ±‚ã€‚é‡‡ç”¨å‡½æ•°æœåŠ¡æ„å»ºçµæ´»æ‹“å±•æ¶æ„,è½»æ¾åˆ›é€ ä¸°å¯Œã€ä¸ªæ€§åŒ–çš„åº”ç”¨ç¨‹åºä½“éªŒã€‚&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;IoTæ¶ˆæ¯å®æ—¶å¤„ç†&lt;/strong&gt;ï¼šæ‚¨å¯ä»¥ä½¿ç”¨å‡½æ•°è®¡ç®—é«˜æ•ˆçš„å¤„ç†å®æ—¶æµæ•°æ®ã€‚ä¾‹å¦‚ï¼Œå®æ—¶è¿‡æ»¤ã€èšåˆã€åˆ†æIoTè®¾å¤‡äº§ç”Ÿçš„æ•°æ®ï¼Œå¹¶å°†äº§ç”Ÿçš„ç»“æ„åŒ–æ•°æ®ä¿å­˜åˆ°æ•°æ®åº“ä¸­ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;å¯ä»¥çœ‹å‡ºï¼Œå‡½æ•°è®¡ç®—ä¸»è¦åº”ç”¨åœ¨&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;äº‹ä»¶å‡ºå‘-&amp;gt;ç®€å•å¤„ç†æ•°æ®-&amp;gt;å­˜å…¥æ•°æ®åº“æˆ–å¯¹è±¡å­˜å‚¨&lt;/code&gt;åœºæ™¯ä¸‹ã€‚&lt;/p&gt;

&lt;p&gt;è¿™ä¸ªåœºæ™¯ä¹Ÿåˆšå¥½é€‚ç”¨äºAPPçƒ­æ›´æ–°çš„åç«¯çš„å‡ ä¸ªæ ¸å¿ƒä¸šåŠ¡ï¼š&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;ä¸Šä¼ æ–°ä»£ç ï¼šä¸Šä¼ ä»£ç åˆ°OSSäº‹ä»¶-&amp;gt;åˆ†æä»£ç -&amp;gt;æ›´æ–°æœ€æ–°ç‰ˆæœ¬ä¿¡æ¯&lt;/li&gt;
  &lt;li&gt;å‘å¸ƒæœ€æ–°ä»£ç ï¼šå‘å¸ƒäº‹ä»¶-&amp;gt;æŸ¥è¯¢è¦å‘å¸ƒä»£ç -&amp;gt;å‘å¸ƒä»£ç åˆ°ç¯å¢ƒ&lt;/li&gt;
  &lt;li&gt;APPæŸ¥è¯¢æ›´æ–°ï¼šæœ€æ–°ç‰ˆæœ¬æŸ¥è¯¢äº‹ä»¶-&amp;gt;æ¯”å¯¹appç‰ˆæœ¬ä¸æœ€æ–°ç‰ˆæœ¬-&amp;gt;è¿”å›ç»“æœ&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ä»è´¹ç”¨æ–¹é¢è€ƒè™‘ï¼Œ&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;å‡½æ•°è®¡ç®—&lt;/code&gt;ç°åœ¨çš„å…è´¹é…é¢åŸºæœ¬å¯ä»¥æ»¡æ˜¯æ—¥å¸¸è¯•ç”¨ï¼Œæ‰€ä»¥å†³å®šç”¨&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;å‡½æ•°è®¡ç®—&lt;/code&gt;æ¥æ”¯æ’‘çƒ­æ›´æ–°æœåŠ¡ã€‚&lt;/p&gt;

&lt;h1 id=&quot;æ¶æ„æ€»è§ˆ&quot;&gt;æ¶æ„æ€»è§ˆ&lt;/h1&gt;
&lt;p&gt;ä½¿ç”¨å‡½æ•°è®¡ç®—ï¼Œä¸»è¦æ˜¯é€šè¿‡äº‘ä¸Šçš„èµ„æºæ¥è§¦å‘å‡½æ•°ï¼Œç„¶åç”±å‡½æ•°å¤„ç†æ•°æ®ï¼Œå¹¶è°ƒåº¦å…¶ä»–äº‘èµ„æºã€‚
&lt;strong&gt;çƒ­æ›´æ–°æœåŠ¡æ¶æ„å›¾&lt;/strong&gt;
&lt;img src=&quot;https://ws4.sinaimg.cn/large/006tNc79ly1fo80xlccycj30vp0dmmz9.jpg&quot; alt=&quot;æ¶æ„çºµè§ˆ&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;åŸºæœ¬ç»„ä»¶&quot;&gt;åŸºæœ¬ç»„ä»¶&lt;/h2&gt;
&lt;p&gt;åœ¨çƒ­æ›´æ–°ä¸šåŠ¡ä¸­ï¼Œä¸»è¦æ¶‰åŠäº†ä»¥ä¸‹å‡ ä¸ªç»„ä»¶ã€‚&lt;/p&gt;

&lt;h3 id=&quot;å‡½æ•°è®¡ç®—&quot;&gt;å‡½æ•°è®¡ç®—&lt;/h3&gt;
&lt;p&gt;å‡½æ•°è®¡ç®—ä½œä¸ºæ‰¿è½½ä¸šåŠ¡çš„åº”ç”¨å±‚ï¼Œæ›¿ä»£äº†ä¼ ç»Ÿä½¿ç”¨ECSæœåŠ¡æ­å»ºçš„åº”ç”¨æœåŠ¡å™¨ã€‚&lt;/p&gt;

&lt;h3 id=&quot;å¯¹è±¡å­˜å‚¨&quot;&gt;å¯¹è±¡å­˜å‚¨&lt;/h3&gt;
&lt;p&gt;å¯¹è±¡å­˜å‚¨ç”¨æ¥åšç®€å•çš„æ•°æ®æŒä¹…åŒ–å’Œå­˜å‚¨çƒ­æ›´æ–°åŒ…ã€‚&lt;/p&gt;

&lt;h3 id=&quot;æ—¥å¿—æœåŠ¡&quot;&gt;æ—¥å¿—æœåŠ¡&lt;/h3&gt;
&lt;p&gt;æ—¥å¿—åœ¨å‡½æ•°è®¡ç®—ä¸­å¾ˆé‡è¦ã€‚å› ä¸ºå‡½æ•°å®¹å™¨åœ¨è¿è¡Œç»“æŸåç«‹å³è¢«é”€æ¯ï¼Œè¿è¡Œè¿‡ç¨‹ä¸­çš„æ—¥å¿—ä¹Ÿä¼šéšç€å®¹å™¨åŒäº‹é”€æ¯ã€‚åªæœ‰åœ¨å‡½æ•°è¿è¡Œæ—¶å°†æ—¥å¿—è¾“å‡ºåˆ°æ—¥å¿—æœåŠ¡ï¼Œæ‰èƒ½åœ¨ä¹‹åæŸ¥è¯¢åˆ°å‡½æ•°çš„è¿è¡Œè®°å½•ã€‚ä¹Ÿå› ä¸ºå¦‚æ­¤ï¼Œåœ¨å‡½æ•°è°ƒè¯•æ—¶ï¼Œæˆ‘ä»¬æ›´éœ€è¦æ—¥å¿—æœåŠ¡æ¥æŸ¥çœ‹å‡½æ•°çš„è¿è¡ŒçŠ¶å†µã€‚&lt;/p&gt;

&lt;h3 id=&quot;apiç½‘å…³&quot;&gt;APIç½‘å…³&lt;/h3&gt;
&lt;p&gt;APIç½‘å…³ä¸ºå‡½æ•°è®¡ç®—æä¾›äº†å¯¹å¤–æä¾›Web APIæ¥å£çš„èƒ½åŠ›ï¼ŒåŒæ—¶ä¹Ÿæä¾›äº†èº«ä»½è®¤è¯å’Œæˆæƒä¸¤å¤§é‡è¦åŠŸèƒ½ã€‚åœ¨APIç½‘å…³ä¸­ï¼Œç”¨æˆ·å¯ä»¥å®šä¹‰æä¾›çš„æ¥å£ç­¾åï¼Œå¹¶æˆæƒç»™ç‰¹å®šçš„ç”¨æˆ·ä½¿ç”¨Web APIã€‚&lt;/p&gt;

&lt;h2 id=&quot;ä¸šåŠ¡æµ&quot;&gt;ä¸šåŠ¡æµ&lt;/h2&gt;
&lt;h3 id=&quot;ä¸Šä¼ ä»£ç &quot;&gt;ä¸Šä¼ ä»£ç &lt;/h3&gt;
&lt;ol&gt;
  &lt;li&gt;ç”¨æˆ·é€šè¿‡OSSå‘½ä»¤è¡Œæˆ–OSSæ§åˆ¶å°ç›´æ¥ä¸Šä¼ ä»£ç åˆ°æŒ‡å®šç›®å½•&lt;/li&gt;
  &lt;li&gt;OSSè§¦å‘å‡½æ•°è®¡ç®—æ‰§è¡Œç›¸åº”ä¸šåŠ¡&lt;/li&gt;
  &lt;li&gt;å‡½æ•°è®¡ç®—å°†ç»“æœä¿å­˜å›OSSæŒ‡å®šç›®å½•&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;æ£€æŸ¥æ›´æ–°&quot;&gt;æ£€æŸ¥æ›´æ–°&lt;/h3&gt;
&lt;ol&gt;
  &lt;li&gt;APPå®¢æˆ·ç«¯è®¿é—®APIç½‘å…³æä¾›çš„API&lt;/li&gt;
  &lt;li&gt;APIç½‘å…³è°ƒç”¨å‡½æ•°è®¡ç®—æ£€æŸ¥ç‰ˆæœ¬&lt;/li&gt;
  &lt;li&gt;APIç½‘å…³å°†å‡½æ•°è®¡ç®—ç»“æœè¿”å›ç»™å®¢æˆ·ç«¯&lt;/li&gt;
&lt;/ol&gt;

&lt;h1 id=&quot;åŸºæœ¬æ¦‚å¿µ&quot;&gt;åŸºæœ¬æ¦‚å¿µ&lt;/h1&gt;
&lt;p&gt;å‡½æ•°è®¡ç®—æœ‰å‡ ä¸ªä¸»è¦çš„æ¦‚å¿µï¼Œåœ¨å¼€å§‹å‰éœ€è¦äº†è§£ã€‚&lt;/p&gt;

&lt;h2 id=&quot;è§’è‰²å’Œæˆæƒ&quot;&gt;è§’è‰²å’Œæˆæƒ&lt;/h2&gt;
&lt;p&gt;å‡½æ•°è®¡ç®—æœ¬èº«åªå¤„ç†ä¸šåŠ¡é€»è¾‘ï¼Œå½“å‡½æ•°è®¡ç®—éœ€è¦ä¸é˜¿é‡Œäº‘ä¸Šå…¶ä»–èµ„æºäº¤äº’çš„æ—¶å€™ï¼Œå°±éœ€è¦åˆ©ç”¨é˜¿é‡Œäº‘çš„RAM(è®¿é—®æ§åˆ¶)ç³»ç»Ÿæ¥ç»™å‡½æ•°ä¸€ä¸ª&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;è§’è‰²å’Œæˆæƒ&lt;/code&gt;æ¥å’Œå…¶ä»–äº‘èµ„æºäº¤äº’ã€‚å‡½æ•°åœ¨è¿è¡Œæ—¶ï¼Œå¯ä»¥é€šè¿‡é»˜è®¤ä¼ å…¥å‡½æ•°çš„&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;context&lt;/code&gt;å˜é‡è·å–è§’è‰²çš„å‡­è¯ï¼Œå¹¶æ‰®æ¼”è¯¥è§’è‰²ä¸å·²æˆæƒçš„äº‘èµ„æºè¿›è¡Œäº¤äº’ã€‚&lt;/p&gt;

&lt;p&gt;å…³äºå¦‚ä½•ä¸ºå‡½æ•°æœåŠ¡åˆ›å»ºè§’è‰²çš„è¯¦ç»†å†…å®¹å¯ä»¥å‚è€ƒ&lt;a href=&quot;https://help.aliyun.com/document_detail/60247.html&quot;&gt;åº”ç”¨ç¤ºä¾‹2 - æˆæƒå‡½æ•°è®¿é—®å…¶ä»–äº‘æœåŠ¡èµ„æº&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;è§¦å‘å™¨å’Œäº‹ä»¶&quot;&gt;è§¦å‘å™¨å’Œäº‹ä»¶&lt;/h2&gt;
&lt;p&gt;äº‹ä»¶æ˜¯å½“å…¶ä»–äº‘èµ„æºéœ€è¦è§¦å‘å‡½æ•°è®¡ç®—å¤„ç†æ—¶ï¼Œå‘é€ç»™å‡½æ•°è®¡ç®—æœåŠ¡çš„ä¸€æ®µåŒ…å«ç‰¹å®šäº‹ä»¶è¯¦æƒ…çš„ä¿¡æ¯ã€‚å…¶ä»–äº‘èµ„æºå¯ä»¥å®šä¹‰ä»€ä¹ˆæ—¶å€™è§¦å‘äº‹ä»¶ï¼ˆå³å®šä¹‰è§¦å‘å™¨ï¼‰ï¼Œä¸åŒèµ„æºï¼Œè§¦å‘äº‹ä»¶åå‘é€ç»™å‡½æ•°è®¡ç®—çš„äº‹ä»¶è¯¦æƒ…ä¸åŒã€‚&lt;/p&gt;

&lt;p&gt;æ³¨ï¼šç›®å‰é˜¿é‡Œäº‘ä¸Šåªæœ‰&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;AIPç½‘å…³&lt;/code&gt;å’Œ&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;OSSå¯¹è±¡å­˜å‚¨&lt;/code&gt;æ”¯æŒåˆ›å»ºè§¦å‘å™¨ã€‚&lt;/p&gt;

&lt;p&gt;æ›´å¤šç»†èŠ‚å¯å‚è€ƒ&lt;a href=&quot;https://help.aliyun.com/document_detail/53097.html&quot;&gt;åº”ç”¨ç¤ºä¾‹4 - è§¦å‘å™¨ç®¡ç†&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;æœåŠ¡&quot;&gt;æœåŠ¡&lt;/h2&gt;
&lt;p&gt;æœåŠ¡æ˜¯ç®¡ç†å‡½æ•°çš„æœ€å°å•ä½ï¼Œæ¯ä¸ªå‡½æ•°éƒ½åªå±äºä¸€ä¸ªæœåŠ¡ã€‚ æœåŠ¡ä¸­å¯ä»¥å®šä¹‰å‡½æ•°å¯ä»¥ä½¿ç”¨çš„â€™è§’è‰²â€™å’Œæ—¥å¿—è¾“å‡ºçš„ä»“åº“ï¼Œæ‰€æœ‰&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;å‡½æ•°&lt;/code&gt;å…±äº«æ‰€å±&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;æœåŠ¡&lt;/code&gt;çš„è¿™äº›è®¾å®šã€‚&lt;/p&gt;

&lt;h2 id=&quot;å‡½æ•°&quot;&gt;å‡½æ•°&lt;/h2&gt;
&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;å‡½æ•°&lt;/code&gt;æ˜¯è¿è¡Œä»£ç çš„å®¹å™¨ã€‚ç”¨æˆ·è‡ªå·±ç¼–å†™éœ€è¦å¤„ç†çš„ä¸šåŠ¡ï¼Œå¹¶æ”¾åœ¨ç›¸åº”è¯­è¨€çš„å‡½æ•°å®¹å™¨ä¸­è¿è¡Œã€‚&lt;/p&gt;

&lt;p&gt;æ³¨ï¼šç›®å‰é˜¿é‡Œäº‘æ”¯æŒ&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;nodejs&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;python&lt;/code&gt;å’Œ&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;java&lt;/code&gt;&lt;/p&gt;

&lt;h1 id=&quot;å®ç°æ­¥éª¤&quot;&gt;å®ç°æ­¥éª¤&lt;/h1&gt;
&lt;p&gt;ç®€å•ä»‹ç»ï¼Œæ­å»ºçƒ­æ›´æ–°åç«¯çš„æ­¥éª¤ã€‚&lt;/p&gt;
&lt;h2 id=&quot;å·¥å…·&quot;&gt;å·¥å…·&lt;/h2&gt;
&lt;p&gt;ç”¨æˆ·å¯ä»¥åœ¨é˜¿é‡Œäº‘æ§åˆ¶å°ä¸­æ“ä½œåˆ›å»º&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;æœåŠ¡&lt;/code&gt;å’Œ&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;å‡½æ•°&lt;/code&gt;ï¼Œæ›´æ–¹ä¾¿çš„åšæ³•æ˜¯ä½¿ç”¨è¡Œæ•°è®¡ç®—å‘½ä»¤è¡Œå·¥å…·&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;fcli&lt;/code&gt;è¿›è¡Œåˆ›å»ºã€‚åœ¨ä¸‹é¢çš„æ­¥éª¤ä¸­ï¼Œé‡‡ç”¨fcliçš„æ–¹å¼ä»‹ç»ã€‚
&lt;a href=&quot;https://help.aliyun.com/document_detail/52995.html&quot;&gt;fcliä¸‹è½½åŠæ–‡æ¡£&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;åˆæ¬¡ä½¿ç”¨fcliéœ€è¦ä½¿ç”¨é˜¿é‡Œäº‘è´¦å·ç™»é™†ã€‚ æ³¨ï¼šå¦‚æœä½¿ç”¨å­è´¦å·ç™»é™†ï¼Œå­è´¦å·éœ€è¦æœ‰æ“ä½œRAMå’Œå‡½æ•°è®¡ç®—çš„æˆæƒã€‚
è¿è¡Œï¼š&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;fcli shell

Please input the endpoint &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;example: https://account_id.cn-shanghai.fc.aliyuncs.com&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;:
&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;ENDPOINT]
Please input the access key &lt;span class=&quot;nb&quot;&gt;id&lt;/span&gt;:
&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;FAKE_ACCESS_KEY_ID]
Please input the access key secret:
&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;FAKE_ACCESS_KEY_SECRET]
Store the configuration &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt;: /Users/testuser/.fcli
Welcome to the &lt;span class=&quot;k&quot;&gt;function &lt;/span&gt;compute world. Have fun!
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;è·å–endpointï¼Œè¯·å‚è€ƒ&lt;a href=&quot;https://help.aliyun.com/document_detail/52984.html&quot;&gt;æœåŠ¡å…¥å£æ–‡æ¡£&lt;/a&gt;ã€‚
è·å–access key id/secretï¼Œè¯·å‚è€ƒ&lt;a href=&quot;https://help.aliyun.com/knowledge_detail/38738.html&quot;&gt;ç›¸å…³æ–‡æ¡£&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;h2 id=&quot;åˆ›å»ºè§’è‰²æˆæƒ&quot;&gt;åˆ›å»ºè§’è‰²æˆæƒ&lt;/h2&gt;
&lt;p&gt;å½“å‡½æ•°è®¡ç®—å’Œå…¶ä»–äº‘èµ„æºæœ‰äº¤äº’çš„æ—¶å€™ï¼Œéœ€è¦åˆ›å»ºä¸¤ç§è§’è‰²æˆæƒï¼Œä¸€ç§æ˜¯æˆæƒç»™å…¶ä»–äº‘èµ„æºä½¿ç”¨è§¦å‘å‡½æ•°è®¡ç®—çš„è§’è‰²ï¼Œ å¦ä¸€ç§æ˜¯æˆæƒç»™å‡½æ•°è®¡ç®—ä½¿ç”¨äº‘èµ„æºçš„è§’è‰²ã€‚&lt;/p&gt;

&lt;h3 id=&quot;è§¦å‘å‡½æ•°è®¡ç®—&quot;&gt;è§¦å‘å‡½æ•°è®¡ç®—&lt;/h3&gt;
&lt;p&gt;åˆ›å»ºè§¦å‘å‡½æ•°è®¡ç®—è§’è‰²ï¼Œç”¨æ¥æˆæƒç»™å…¶ä»–äº‘èµ„æºè°ƒç”¨å‡½æ•°è®¡ç®—æœåŠ¡ã€‚ ä¾‹å¦‚ï¼Œæˆæƒapiç½‘å…³è°ƒç”¨å‡½æ•°è®¡ç®—ï¼Œæˆ–å¯¹è±¡å­˜å‚¨æœåŠ¡è§¦å‘å‡½æ•°è®¡ç®—ã€‚&lt;/p&gt;

&lt;p&gt;è¿è¡Œï¼š&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;mkir fc-invoke-function
mkrp fc-invoke-all &lt;span class=&quot;nt&quot;&gt;-a&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'&quot;fc:InvokeFunction&quot;'&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-r&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'&quot;*&quot;'&lt;/span&gt;
attach &lt;span class=&quot;nt&quot;&gt;-p&lt;/span&gt; /ram/policies/fc-invoke-all &lt;span class=&quot;nt&quot;&gt;-r&lt;/span&gt; /ram/roles/fc-invoke-function
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;å¯¹è±¡å­˜å‚¨åŠæ—¥å¿—æœåŠ¡è¯»å†™&quot;&gt;å¯¹è±¡å­˜å‚¨åŠæ—¥å¿—æœåŠ¡è¯»å†™&lt;/h3&gt;
&lt;p&gt;åˆ›å»ºå…¶ä»–äº‘èµ„æºè°ƒç”¨è§’è‰²ï¼Œç”¨æ¥è®©å‡½æ•°è®¡ç®—æœåŠ¡å¯ä»¥è®¿é—®&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;æ—¥å¿—æœåŠ¡&lt;/code&gt;å’Œ&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;OSSå¯¹è±¡å­˜å‚¨&lt;/code&gt;æœåŠ¡ã€‚&lt;/p&gt;

&lt;p&gt;è¿è¡Œï¼š&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;mksr fc-oss-log-op
mkrp fc-oss-log-gp &lt;span class=&quot;nt&quot;&gt;-a&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'[&quot;oss:GetObject&quot;, &quot;oss:PutObject&quot;, &quot;log:PostLogStoreLogs&quot;, &quot;log:GetLogStore&quot;]'&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-r&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'&quot;*&quot;'&lt;/span&gt;
attach &lt;span class=&quot;nt&quot;&gt;-p&lt;/span&gt; /ram/policies/fc-oss-log-gp &lt;span class=&quot;nt&quot;&gt;-r&lt;/span&gt; /ram/roles/fc-oss-log-op
mks oss_demo &lt;span class=&quot;nt&quot;&gt;-r&lt;/span&gt; acs:ram::[ALIYUN ACCOUNT &lt;span class=&quot;nb&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;:role/fc-oss-log-op
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;æ³¨ï¼šè¿™é‡Œä¸ºäº†æ¼”ç¤ºæ–¹ä¾¿ï¼Œå¹¶æ²¡æœ‰é™åˆ¶å…·ä½“å¯æ“ä½œèµ„æºï¼Œç”¨æˆ·éœ€è¦æ›´å…·å…·ä½“æƒ…å†µåˆç†çš„é™åˆ¶å¯æ“ä½œèµ„æºã€‚&lt;/p&gt;

&lt;h2 id=&quot;åˆ›å»ºæ—¥å¿—åº“&quot;&gt;åˆ›å»ºæ—¥å¿—åº“&lt;/h2&gt;
&lt;p&gt;åˆ›å»ºæ—¥å¿—åº“æ¥ï¼Œç”¨æ¥æ”¶é›†å‡½æ•°æ—¥å¿—ã€‚ å…·ä½“æ­¥éª¤å¯ä»¥å‚è€ƒ&lt;a href=&quot;https://help.aliyun.com/document_detail/61023.html&quot;&gt;å‡½æ•°è®¿é—®æ—¥å¿—æœåŠ¡&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;è¿™é‡Œåˆ›å»ºä¸€ä¸ªæ—¥å¿—é¡¹ç›®åä¸º&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;fc-beijing&lt;/code&gt;ï¼Œ ä»“åº“åä¸º&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;hotpatch&lt;/code&gt;çš„æ—¥å¿—åº“ã€‚&lt;/p&gt;

&lt;h2 id=&quot;åˆ›å»ºoss&quot;&gt;åˆ›å»ºOSS&lt;/h2&gt;
&lt;p&gt;çƒ­æ›´æ–°çš„ä»£ç éœ€è¦å­˜æ”¾åœ¨OSSä¸­ï¼Œæ‰€ä»¥éœ€è¦åˆ›å»ºä¸€ä¸ªä¸å‡½æ•°æœåŠ¡åœ¨åŒä¸€ä¸ªåŒºå­˜å‚¨ç©ºé—´ã€‚åå­—ä¸º&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;hotpatch&lt;/code&gt;, ä¸”è¯»å†™æƒé™ä¸ºâ€˜å…¬å…±è¯»ï¼Œç§æœ‰å†™â€™ã€‚&lt;/p&gt;

&lt;h2 id=&quot;åˆ›å»ºå‡½æ•°æœåŠ¡&quot;&gt;åˆ›å»ºå‡½æ•°æœåŠ¡&lt;/h2&gt;
&lt;p&gt;åœ¨é˜¿é‡Œæ§åˆ¶å°é€‰æ‹©å‡½æ•°æœåŠ¡ï¼Œåˆ›å»ºåä¸º&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;hotpatchService&lt;/code&gt;çš„å‡½æ•°æœåŠ¡ï¼Œé€‰æ‹©åˆšåˆ›å»ºçš„æ—¥å¿—åº“&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;hotpatch&lt;/code&gt;å’Œ&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;fc-oss-log-op&lt;/code&gt;è¿™ä¸ªè§’è‰²ã€‚
&lt;img src=&quot;https://ws1.sinaimg.cn/large/006tNc79ly1fo80vw9gq9j30j00iujtb.jpg&quot; alt=&quot;åˆ›å»ºå‡½æ•°æœåŠ¡&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;åˆ›å»ºé¡¹ç›®&quot;&gt;åˆ›å»ºé¡¹ç›®&lt;/h2&gt;
&lt;p&gt;å‡½æ•°æœåŠ¡æœ¬èº«æ¯ä¸€ä¸ªå‡½æ•°éƒ½æ˜¯ç‹¬ç«‹çš„ä»£ç ç‰‡æ®µå¤„ç†ä¸šåŠ¡çš„æŸä¸€ä¸ªéƒ¨åˆ†ï¼Œè‡ªèº«å°±åƒä¸€ä¸ªå°çš„é¡¹ç›®ã€‚ä½†æ˜¯ï¼Œä¸€ä¸ªæœåŠ¡ä¸‹çš„æ‰€æœ‰å‡½æ•°ï¼Œå´æ˜¯åœ¨å¤„ç†åŒä¸€å—ä¸šåŠ¡ã€‚&lt;/p&gt;

&lt;p&gt;çƒ­æ›´æ–°é¡¹ç›®çš„ç»“æ„ï¼Œå€Ÿé‰´äº†ä¸€äº›å¼€æºé¡¹ç›®åŒ…å«å¤šä¸ªå­é¡¹ç›®çš„ä»£ç ç®¡ç†æ€è·¯ï¼ŒæŠŠæœåŠ¡ä½œä¸ºä¸€ä¸ªé¡¹ç›®ï¼Œæ¯ä¸€ä¸ªå‡½æ•°ä½œä¸ºå­é¡¹ç›®ã€‚è¾¾åˆ°ï¼ŒæœåŠ¡çš„æ‰€æœ‰å‡½æ•°ä»£ç ä½¿ç”¨åŒä¸€ä¸ªä»£ç åº“ç®¡ç†ï¼Œä½†æ¯ä¸ªå‡½æ•°çš„ä»£ç åˆæ˜¯ç‹¬ç«‹çš„å¯ä»¥è‡ªè¡Œç®¡ç†ä¾èµ–ï¼Œæµ‹è¯•ï¼Œå‘å¸ƒç­‰æ“ä½œã€‚&lt;/p&gt;

&lt;p&gt;å› ä¸ºé‡‡ç”¨nodejså¼€å‘ï¼Œæ‰€ä»¥ä½¿ç”¨&lt;a href=&quot;https://lernajs.io&quot;&gt;lerna&lt;/a&gt;ä½œä¸ºç®¡ç†é¡¹ç›®å’Œå­é¡¹ç›®çš„å·¥å…·ã€‚é¡¹ç›®ç›®å½•å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;â”œâ”€â”€ README.md
â”œâ”€â”€ lerna.json
â”œâ”€â”€ package.json
â”œâ”€â”€ packages
â”‚Â Â  â”œâ”€â”€ getLatestBundle
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ index.js
â”‚Â Â  â”‚Â Â  â””â”€â”€ package.json
â”‚Â Â  â””â”€â”€ uploadBundle
â”‚Â Â      â”œâ”€â”€ index.js
â”‚Â Â      â”œâ”€â”€ node_modules
â”‚Â Â      â”œâ”€â”€ package-lock.json
â”‚Â Â      â””â”€â”€ package.json
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;packages&lt;/code&gt;ç›®å½•ä¸‹å­˜æ”¾ç€ä¸åŒçš„å‡½æ•°ï¼Œæ¯ä¸ªå‡½æ•°æ˜¯ä¸€ä¸ªæ–‡ä»¶å¤¹, ä½¿ç”¨å‡½æ•°åå­—å‘½åï¼Œä¾‹å¦‚&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;uploadBundle&lt;/code&gt;ã€‚æ²¡ä¸ªå‡½æ•°ä½¿ç”¨&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;package.json&lt;/code&gt;ç®¡ç†ä¾èµ–åŒ…ã€‚&lt;/p&gt;

&lt;h2 id=&quot;ä¸Šä¼ uploadbundleä»£ç &quot;&gt;ä¸Šä¼ UploadBundleä»£ç &lt;/h2&gt;
&lt;p&gt;åœ¨uploadBundeç›®å½•ä¸‹è¿è¡Œ&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;fcli shell
mkf uploadBundle &lt;span class=&quot;nt&quot;&gt;-h&lt;/span&gt; index.handler &lt;span class=&quot;nt&quot;&gt;-t&lt;/span&gt; nodejs6
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;ä¸Šä¼ getlatestbundleä»£ç &quot;&gt;ä¸Šä¼ getLatestBundleä»£ç &lt;/h2&gt;
&lt;p&gt;ä¸Šä¼ getLatestBundleä»£ç &lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;fcli shell
mkf getLatestBundle &lt;span class=&quot;nt&quot;&gt;-h&lt;/span&gt; index.handler &lt;span class=&quot;nt&quot;&gt;-t&lt;/span&gt; nodejs6
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;æ›´æ–°ä»£ç &quot;&gt;æ›´æ–°ä»£ç &lt;/h2&gt;
&lt;p&gt;ä½¿ç”¨ç¼–è¾‘å™¨ç¼–è¾‘æœ¬åœ°ä»£ç åï¼Œåœ¨å‡½æ•°æ–‡ä»¶å¤¹è¿è¡Œ&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;fcli shell
upf &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;FUNCTION NAME] &lt;span class=&quot;nt&quot;&gt;-h&lt;/span&gt; index.handler &lt;span class=&quot;nt&quot;&gt;-t&lt;/span&gt; nodejs6
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;åˆ›å»ºè§¦å‘å™¨&quot;&gt;åˆ›å»ºè§¦å‘å™¨&lt;/h2&gt;
&lt;p&gt;ç›®å‰åªæœ‰OSSå¯¹è±¡å­˜å‚¨æœåŠ¡ï¼Œæ”¯æŒåˆ›å»ºå‡½æ•°è§¦å‘å™¨ï¼Œç”¨æˆ·å¯ä»¥å®šä¹‰å½“å­˜å‚¨ç©ºé—´å†…æŸäº›æ“ä½œæ‰§è¡Œåè§¦å‘å‡½æ•°ï¼Œä¾‹å¦‚ç”¨æˆ·ä¸Šä¼ æ–°çš„å¯¹è±¡åï¼Œè§¦å‘å‡½æ•°ã€‚&lt;/p&gt;

&lt;p&gt;åœ¨çƒ­æ›´æ–°åå°ä¸­ï¼Œéœ€è¦åœ¨æœ‰æ–°ä»£ç ä¸Šä¼ åï¼Œå¯¹ä»£ç è¿›è¡Œmd5è®¡ç®—ï¼Œå¹¶æ”¾å…¥æµ‹è¯•ç¯å¢ƒã€‚&lt;/p&gt;

&lt;p&gt;åˆ›å»ºè§¦å‘å™¨config.yaml, å®šä¹‰OSSè§¦å‘å‡½æ•°çš„äº‹ä»¶&lt;/p&gt;
&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;na&quot;&gt;triggerConfig&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;events&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;oss:ObjectCreated:*&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;filter&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;na&quot;&gt;prefix&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;src/&lt;/span&gt;
            &lt;span class=&quot;na&quot;&gt;suffix&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;.js&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;åœ¨bashä¸­è¿è¡Œï¼š&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;mkt uploadBundle &lt;span class=&quot;nt&quot;&gt;-t&lt;/span&gt; oss &lt;span class=&quot;nt&quot;&gt;-r&lt;/span&gt; acs:ram::[ALIYUN ACCOUNT &lt;span class=&quot;nb&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;:role/fc-invoke-function &lt;span class=&quot;nt&quot;&gt;-s&lt;/span&gt; acs:oss:[REGION]:[ALIYUN ACCOUNT ID]:hotpatch &lt;span class=&quot;nt&quot;&gt;-c&lt;/span&gt; config.yaml
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;apiç½‘å…³-1&quot;&gt;APIç½‘å…³&lt;/h2&gt;
&lt;p&gt;å½“ä½¿ç”¨å‡½æ•°è®¡ç®—ä½œä¸ºWeb APIæœåŠ¡åç«¯æ—¶ï¼Œéœ€è¦ä½¿ç”¨APIç½‘å…³æ¥å®šä¹‰Web APIçš„æ¥å£ï¼Œå¹¶ç”±APIç½‘å…³è½¬æ¢å®¢æˆ·ç«¯è¯·æ±‚åï¼Œè°ƒç”¨å‡½æ•°è®¡ç®—æœåŠ¡ã€‚&lt;/p&gt;

&lt;p&gt;åœ¨æ›´æ–°åå°ä¸­ï¼Œæ£€æµ‹ç‰ˆæœ¬æ›´æ–°éœ€è¦ä»¥Web APIçš„å½¢å¼æä¾›ç»™APPå®¢æˆ·ç«¯è®¿é—®ã€‚&lt;/p&gt;

&lt;h3 id=&quot;æ­¥éª¤&quot;&gt;æ­¥éª¤ï¼š&lt;/h3&gt;
&lt;h4 id=&quot;åœ¨é˜¿é‡Œäº‘æ§åˆ¶å°ä¸­æ‰“å¼€apiç½‘å…³åˆ›å»ºåä¸ºhotpatchapigroupçš„åˆ†ç»„&quot;&gt;åœ¨é˜¿é‡Œäº‘æ§åˆ¶å°ä¸­æ‰“å¼€&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;APIç½‘å…³&lt;/code&gt;ï¼Œåˆ›å»ºåä¸º&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;hotpatchAPIGroup&lt;/code&gt;çš„&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;åˆ†ç»„&lt;/code&gt;&lt;/h4&gt;
&lt;p&gt;&lt;img src=&quot;https://ws2.sinaimg.cn/large/006tNc79ly1fo95v5dsrnj31080kg40i.jpg&quot; alt=&quot;åˆ›å»ºåˆ†ç»„&quot; /&gt;&lt;/p&gt;

&lt;h4 id=&quot;åˆ›å»ºåä¸ºgetlatestbundleçš„api&quot;&gt;åˆ›å»ºåä¸º&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;getLatestBundle&lt;/code&gt;çš„API&lt;/h4&gt;
&lt;p&gt;å®‰å…¨æ–¹å¼æš‚æ—¶é€‰åˆ™&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;æ— è®¤è¯&lt;/code&gt;ï¼Œåœ¨åé¢çš„&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;å®‰å…¨&lt;/code&gt;ç« èŠ‚ä¸­ä¼šä»‹ç»å¦‚ä½•å¼€å¯è®¤è¯ã€‚&lt;/p&gt;

&lt;p&gt;åˆ›å»ºAPI
&lt;img src=&quot;https://ws1.sinaimg.cn/large/006tNc79ly1fo96d1kcnzj30wc0tcadh.jpg&quot; alt=&quot;åˆ›å»ºAPI&quot; /&gt;&lt;/p&gt;

&lt;p&gt;è¯·æ±‚åŸºç¡€å®šä¹‰
&lt;img src=&quot;https://ws1.sinaimg.cn/large/006tNc79ly1fo96fmi1iuj30qa0qujui.jpg&quot; alt=&quot;è¯·æ±‚åŸºç¡€å®šä¹‰&quot; /&gt;&lt;/p&gt;

&lt;p&gt;åç«¯åŸºç¡€å®šä¹‰
&lt;img src=&quot;https://ws2.sinaimg.cn/large/006tNc79ly1fo96mpy5f2j30py0oxq6j.jpg&quot; alt=&quot;åç«¯åŸºç¡€å®šä¹‰&quot; /&gt;&lt;/p&gt;

&lt;p&gt;å®šä¹‰è¿”å›ç»“æœ&lt;/p&gt;
&lt;div class=&quot;language-json highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;isBase64Encoded&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;statusCode&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;httpStatusCode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;headers&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:{&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;headers&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;body&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;...&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;æ³¨ï¼šæ›´è¯¦ç»†æ­¥éª¤å¯å‚è€ƒ&lt;a href=&quot;https://help.aliyun.com/document_detail/66672.html&quot;&gt;APIç½‘å…³è§¦å‘å‡½æ•°è®¡ç®—&lt;/a&gt;&lt;/p&gt;

&lt;h1 id=&quot;å®‰å…¨&quot;&gt;å®‰å…¨&lt;/h1&gt;
&lt;p&gt;åœ¨ä¹‹å‰åˆ›å»ºAPIæ—¶ï¼Œé€‰æ‹©äº†&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;æ— è®¤è¯&lt;/code&gt;ï¼Œåœ¨å­¦ä¹ ä½¿ç”¨å‡½æ•°è®¡ç®—ä½œä¸ºAPIæœåŠ¡åç«¯æ—¶æ˜¯å¯ä»¥ç®€åŒ–æ¦‚å¿µï¼ŒæŠŠé‡ç‚¹æ”¾åœ¨å¦‚ä½•é“¾æ¥ä¸¤ä¸ªæœåŠ¡ä¸Šã€‚ åœ¨çœŸå®é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬ä¾ç„¶å¸Œæœ›APIçš„è®¿é—®æ˜¯å¯æ§çš„ï¼Œåªæœ‰æˆæƒè¿‡çš„å®¢æˆ·ç«¯æ‰å¯ä»¥è®¿é—®ã€‚&lt;/p&gt;

&lt;p&gt;APIç½‘å…³æœåŠ¡æä¾›äº†ä¸€ç§åŸºäºåº”ç”¨çš„è®¤è¯æˆæƒçš„æœºåˆ¶ï¼Œç”¨æˆ·å¯ä»¥åœ¨APIç½‘å…³ä¸­åˆ›å»ºä¸€ä¸ªåº”ç”¨ï¼Œå¹¶åœ¨APIä¸­è®¾ç½®å®‰å…¨æ–¹å¼ä¸º&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;é˜¿é‡Œäº‘APP&lt;/code&gt;, ç­¾åç®—æ³•ä¸º&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;HmacSHA256&lt;/code&gt;ã€‚ ä¹‹åï¼Œåœ¨&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;æˆæƒä¿¡æ¯&lt;/code&gt;ä¸­æ·»åŠ åº”ç”¨è®¿é—®APIçš„æˆæƒã€‚&lt;/p&gt;

&lt;p&gt;æ³¨ï¼šè¯¦ç»†æ­¥éª¤å¯å‚è€ƒ&lt;a href=&quot;https://help.aliyun.com/document_detail/29497.html&quot;&gt;æˆæƒç»™åº”ç”¨&lt;/a&gt;&lt;/p&gt;

&lt;h1 id=&quot;åè®°&quot;&gt;åè®°&lt;/h1&gt;
&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;çƒ­æ›´æ–°å&lt;/code&gt;ç«¯ä½œä¸ºæŠ€æœ¯éªŒè¯é¡¹ç›®ï¼Œå·²ç»éƒ¨ç½²åœ¨æµ‹è¯•ç¯å¢ƒï¼Œç”Ÿäº§ç¯å¢ƒæš‚æ—¶æ²¡æœ‰å¼€å¯ã€‚&lt;/p&gt;

&lt;p&gt;ç›®å‰ï¼Œè¿˜æœ‰å‡ å¤„ä¸å®Œå–„çš„åœ°æ–¹ï¼š&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;å‘å¸ƒå‡½æ•°&lt;/li&gt;
  &lt;li&gt;å®¢æˆ·ç«¯å‘½ä»¤è¡Œ&lt;/li&gt;
  &lt;li&gt;é’ˆå¯¹ä¸åŒç‰ˆæœ¬åšdiff patchï¼Œä½¿æ›´æ–°åŒ…æ›´å°ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;todo&quot;&gt;TODO&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;å…¬å¼€é¡¹ç›®ä»£ç &lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;é™„å½•&quot;&gt;é™„å½•&lt;/h1&gt;
&lt;h2 id=&quot;å‚è€ƒæ–‡æ¡£&quot;&gt;å‚è€ƒæ–‡æ¡£&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://help.aliyun.com/document_detail/51783.html&quot;&gt;å‡½æ•°æœåŠ¡å¼€å‘æ‰‹å†Œ&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://help.aliyun.com/document_detail/54788.html&quot;&gt;ä»¥å‡½æ•°è®¡ç®—ä½œä¸º API ç½‘å…³åç«¯æœåŠ¡&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        <pubDate>Sun, 11 Feb 2018 16:58:11 +0800</pubDate>
        <link>http://frankwang.cn/post/2018/02/11/aliyun-fc-RN-hotpatch-backend.html</link>
        <guid isPermaLink="true">http://frankwang.cn/post/2018/02/11/aliyun-fc-RN-hotpatch-backend.html</guid>
        
        
        <category>post</category>
        
      </item>
    
      <item>
        <title>Redux Sagaå®è·µ</title>
        <description>&lt;h1 id=&quot;redux-saga-å®è·µ&quot;&gt;Redux Saga å®è·µ&lt;/h1&gt;
&lt;p&gt;æœ¬æ–‡ç”¨ä»¥è®°å½•ä»è°ƒç ”Redux Sagaï¼Œåˆ°åº”ç”¨åˆ°é¡¹ç›®ä¸­çš„ä¸€äº›æ”¶è·ã€‚&lt;/p&gt;

&lt;h1 id=&quot;ä»€ä¹ˆæ˜¯redux-saga&quot;&gt;ä»€ä¹ˆæ˜¯Redux Saga&lt;/h1&gt;
&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;å®˜ç½‘è§£é‡Š&lt;/code&gt; æ¥è‡ªï¼š&lt;a href=&quot;https://github.com/redux-saga/redux-saga&quot;&gt;https://github.com/redux-saga/redux-saga&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;redux-saga&lt;/code&gt; is a library that aims to make side effects (i.e. asynchronous things like data fetching and impure things like accessing the browser cache) in React/Redux applications easier and better.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;p&gt;The mental model is that a saga is like a separate thread in your application thatâ€™s solely responsible for side effects. redux-saga is a redux middleware, which means this thread can be started, paused and cancelled from the main application with normal redux actions, it has access to the full redux application state and it can dispatch redux actions as well.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;åˆšå¼€å§‹äº†è§£Sagaæ—¶ï¼Œçœ‹å®˜æ–¹è§£é‡Šï¼Œå¹¶ä¸æ˜¯å¾ˆæ¸…æ¥šåˆ°åº•æ˜¯ä»€ä¹ˆï¼ŸSagaçš„å‰¯ä½œç”¨(side effects)åˆ°åº•æ˜¯ä»€ä¹ˆ?&lt;/p&gt;

&lt;p&gt;é€šè¯»äº†&lt;a href=&quot;https://github.com/redux-saga/redux-saga&quot;&gt;å®˜æ–¹æ–‡æ¡£&lt;/a&gt;åï¼Œå¤§æ¦‚äº†è§£åˆ°ï¼Œå‰¯ä½œç”¨å°±æ˜¯åœ¨actionè§¦å‘reduserä¹‹åæ‰§è¡Œçš„ä¸€äº›åŠ¨ä½œï¼Œ è¿™äº›åŠ¨ä½œåŒ…æ‹¬ä½†ä¸é™äºï¼Œè¿æ¥ç½‘ç»œï¼Œioè¯»å†™ï¼Œè§¦å‘å…¶ä»–actionã€‚å¹¶ä¸”ï¼Œå› ä¸ºSageçš„å‰¯ä½œç”¨æ˜¯é€šè¿‡reduxçš„actionè§¦å‘çš„ï¼Œæ¯ä¸€ä¸ªactionï¼Œsageéƒ½ä¼šåƒreduserä¸€æ ·æ¥æ”¶åˆ°ã€‚å¹¶ä¸”é€šè¿‡è§¦å‘ä¸åŒçš„action, æˆ‘ä»¬å¯ä»¥æ§åˆ¶è¿™äº›å‰¯ä½œç”¨çš„çŠ¶æ€ï¼Œ ä¾‹å¦‚ï¼Œå¯åŠ¨ï¼Œåœæ­¢ï¼Œå–æ¶ˆã€‚&lt;/p&gt;

&lt;p&gt;æ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥ç†è§£ä¸ºSageæ˜¯ä¸€ä¸ªå¯ä»¥ç”¨æ¥å¤„ç†å¤æ‚çš„å¼‚æ­¥é€»è¾‘çš„æ¨¡å—ï¼Œå¹¶ä¸”ç”±reduxçš„actionè§¦å‘ã€‚&lt;/p&gt;

&lt;h1 id=&quot;ä½¿ç”¨sagaè§£å†³çš„é—®é¢˜&quot;&gt;ä½¿ç”¨Sagaè§£å†³çš„é—®é¢˜&lt;/h1&gt;
&lt;p&gt;æœ€åˆï¼Œåœ¨å¼€å§‹æ¢ç©¶Sagaä¹‹å‰ï¼Œæˆ‘ä»¬æ˜¯å¸Œæœ›å¯»æ±‚ä¸€ç§æ–¹å¼æ¥éš”ç¦»å¼€åº”ç”¨å‰ç«¯çš„&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;å±•ç°å±‚&lt;/code&gt;ï¼Œ&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ä¸šåŠ¡å±‚&lt;/code&gt;å’Œ&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;æ•°æ®å±‚&lt;/code&gt;ã€‚ å¤§æ¦‚æƒ³æ³•æ˜¯ä½¿ç”¨reactå±•ç°æ•°æ®ï¼Œreduxç®¡ç†æ•°æ®ï¼Œç„¶åå€ŸåŠ©reduxçš„middlewareæ¥å®ç°ä¸šåŠ¡å±‚ã€‚è¿™æ ·åŸæœ‰çš„reactä¸ºæ ¸å¿ƒçš„é¡¹ç›®æ¶æ„ï¼Œå˜æˆäº†reduxä¸ºæ ¸å¿ƒçš„æ¶æ„ã€‚&lt;/p&gt;

&lt;p&gt;åœ¨æœ€åˆçš„è°ƒç ”ä¸­&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;redux-thunk&lt;/code&gt;æ˜¯é¦–å…ˆè€ƒè™‘çš„ï¼Œ&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;redux-thunk&lt;/code&gt;æ˜¯åœ¨actionä½œç”¨åˆ°reducerä¹‹å‰è§¦å‘ä¸€äº›ä¸šåŠ¡æ“ä½œã€‚åˆšå¥½èµ·åˆ°æ§åˆ¶å±‚çš„ä½œç”¨ã€‚&lt;/p&gt;

&lt;p&gt;ä½†æ˜¯ï¼Œé©¬ä¸Šäº†è§£åˆ°äº†&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;redux-sage&lt;/code&gt;ï¼Œå› ä¸ºå¤§å®¶éƒ½åœ¨å¯¹æ¯”ä¸¤è€…ã€‚æœ¬æ–‡å¹¶ä¸ä¼šåšå¯¹æ¯”ï¼Œåœ¨æ–‡ç« çš„æœ€åä¼šç®€å•ä»‹ç»ä¸ºä»€ä¹ˆé€‰äº†Sagaè€Œä¸æ˜¯thunkçš„åŸå› ï¼Œä»…ä¾›å‚è€ƒã€‚&lt;/p&gt;

&lt;p&gt;åœ¨æµè§ˆäº†å¾ˆå¤šæ¯”è¾ƒæ–‡ç« åï¼Œæœ€ç»ˆï¼Œæˆ‘ä»¬é€‰æ‹©äº†redux-sagaæ¥å¤„ç†åº”ç”¨çš„&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;æ§åˆ¶å±‚&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;p&gt;ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;åœ¨ç”¨æˆ·æäº¤è¡¨å•çš„æ—¶å€™ï¼Œæˆ‘ä»¬æƒ³è¦åšå¦‚ä¸‹äº‹æƒ…ï¼š&lt;/p&gt;
  &lt;ul&gt;
    &lt;li&gt;æ ¡éªŒä¸€äº›è¾“å…¥ä¿¡æ¯ (ç®€å•ï¼Œ å†™åœ¨ç»„ä»¶é‡Œ)&lt;/li&gt;
    &lt;li&gt;å¼¹èµ·æç¤ºä¿¡æ¯ï¼ˆèªæ˜çš„æˆ‘ï¼Œä¸€å®šè¦å†™ä¸€ä¸ªå…¬ç”¨çš„æç¤ºä¿¡æ¯æ¨¡å—ï¼Œè¿™æ ·åˆ«çš„é¡µé¢å¼•å…¥å°±å¯ä»¥ç”¨äº†ï¼Œ å‘µå‘µå‘µå‘µã€‚ã€‚ã€‚ï¼‰&lt;/li&gt;
    &lt;li&gt;æäº¤åç«¯æœåŠ¡ ï¼ˆç›´æ¥ç»„ä»¶é‡Œé¢fetchå§ã€‚ã€‚ã€‚ï¼‰&lt;/li&gt;
    &lt;li&gt;æ‹¿åˆ°åç«¯è¿”å›çŠ¶æ€ ï¼ˆpromise so easyâ€¦ï¼‰&lt;/li&gt;
    &lt;li&gt;éšè—æç¤ºä¿¡æ¯ (è¿™ä¸ªæœ‰ç‚¹éš¾åº¦ï¼Œä¸è¿‡éš¾ä¸å€’æˆ‘ï¼Œæˆ‘ç»™ç»„å»ºåŠ ä¸€ä¸ªæ§åˆ¶å±æ€§)&lt;/li&gt;
    &lt;li&gt;æ›´æ–°redux store ï¼ˆdispatchå’¯ã€‚ã€‚ã€‚ï¼‰&lt;/li&gt;
  &lt;/ul&gt;
&lt;/blockquote&gt;

&lt;p&gt;å¥½äº†ï¼Œç°åœ¨æˆ‘ä»¬è¦æŠŠåˆšåˆšåšçš„äº‹æƒ…åŠ åˆ°æ‰€æœ‰çš„è¡¨å•ä¸Šã€‚ã€‚ã€‚ ï¼ˆWTF, æ¯ä¸ªformç»„ä»¶éƒ½è¦åšåŒæ ·çš„äº‹æƒ…ã€‚ã€‚ã€‚é¡µé¢çš„ä»£ç ä¸‘çš„ä¸æƒ³å†å¤šçœ‹ä¸€çœ¼ã€‚ã€‚ã€‚ï¼‰&lt;/p&gt;

&lt;p&gt;ç”¨äº†redux-sagaä¹‹åï¼š&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;formç»„ä»¶è§¦å‘æäº¤action (ä¸€è¡Œç®€å•çš„dispatch)&lt;/li&gt;
  &lt;li&gt;reducerè¿™ä¸ªactionä¸éœ€è¦æˆ‘å¤„ç† ï¼ˆæ‰“é…±æ²¹äº†ï¼‰&lt;/li&gt;
  &lt;li&gt;sagaæäº¤è¡¨å•çš„å‰¯ä½œç”¨èµ°èµ·ï½ ï¼ˆç›‘å¬åˆ°è§¦å‘å‰¯ä½œç”¨çš„actionï¼‰
    &lt;ul&gt;
      &lt;li&gt;æ ¡éªŒä¸€ä¸‹&lt;/li&gt;
      &lt;li&gt;é€šçŸ¥&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;æ˜¾ç¤ºå±‚&lt;/code&gt;å¼¹èµ·ä¿¡æ¯æ¡† ï¼ˆdispatchä¸€ä¸‹å˜æ›´æ§åˆ¶ä¿¡æ¯æ¡†å¼¹èµ·çš„storeï¼‰&lt;/li&gt;
      &lt;li&gt;æäº¤è¡¨å• (yieldä¸€ä¸ªpromisï¼Œyieldæ˜¯javascript generatorçš„è¯­æ³•ï¼Œç¨åæœ‰ä»‹ç»)&lt;/li&gt;
      &lt;li&gt;æ‹¿åˆ°åç«¯è¿”å›çŠ¶æ€&lt;/li&gt;
      &lt;li&gt;æ›´æ–°redux store (dispatchä¸€ä¸‹)&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;https://github.com/yanqiw/yanqiw.github.io/raw/master/img/redux-saga-01.jpg&quot; alt=&quot;redux-saga åœ¨é¡¹ç›®ä¸­çš„ç»“æ„&quot; /&gt;
å¯ä»¥çœ‹åˆ°åœ¨ä½¿ç”¨äº†Sagaåï¼Œreactåªè´Ÿè´£æ•°æ®å¦‚ä½•å±•ç¤ºï¼Œreduxæ¥è´Ÿè´£æ•°æ®çš„çŠ¶æ€å’Œç»‘å®šæ•°æ®åˆ°reactï¼Œè€ŒSagaå¤„ç†äº†å¤§éƒ¨åˆ†å¤æ‚çš„ä¸šåŠ¡é€»è¾‘ã€‚&lt;/p&gt;

&lt;p&gt;é€šè¿‡è¿™ä¸ªæ”¹å˜ï¼Œå‰ç«¯åº”ç”¨çš„ä»£ç ç»“æ„æ›´åŠ æ¸…æ™°ï¼Œä¸šåŠ¡å±‚å¯å¤ç”¨çš„éƒ¨åˆ†å¢åŠ ã€‚å½“ç„¶ï¼ŒSagaå¯¹è‡ªåŠ¨åŒ–æµ‹è¯•ä¹Ÿæ”¯æŒçš„å¾ˆå¥½ï¼Œå¯ä»¥å°†é€»è¾‘å•ç‹¬ä½¿ç”¨è‡ªåŠ¨åŒ–è„šæœ¬æµ‹è¯•ï¼Œæé«˜é¡¹ç›®è´¨é‡ã€‚&lt;/p&gt;

&lt;h1 id=&quot;å¼€å§‹å‰éœ€è¦äº†è§£çš„å‡ ä¸ªæ¦‚å¿µ&quot;&gt;å¼€å§‹å‰éœ€è¦äº†è§£çš„å‡ ä¸ªæ¦‚å¿µ&lt;/h1&gt;

&lt;h2 id=&quot;reduxä¸­é—´ä»¶&quot;&gt;reduxä¸­é—´ä»¶&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;http://cn.redux.js.org/&quot;&gt;reduxä¸­æ–‡æ–‡æ¡£&lt;/a&gt;è§£é‡Šå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;å¦‚æœä½ ä½¿ç”¨è¿‡ Express æˆ–è€… Koa ç­‰æœåŠ¡ç«¯æ¡†æ¶, é‚£ä¹ˆåº”è¯¥å¯¹ middleware çš„æ¦‚å¿µä¸ä¼šé™Œç”Ÿã€‚ åœ¨è¿™ç±»æ¡†æ¶ä¸­ï¼Œmiddleware æ˜¯æŒ‡å¯ä»¥è¢«åµŒå…¥åœ¨æ¡†æ¶æ¥æ”¶è¯·æ±‚åˆ°äº§ç”Ÿå“åº”è¿‡ç¨‹ä¹‹ä¸­çš„ä»£ç ã€‚ä¾‹å¦‚ï¼ŒExpress æˆ–è€… Koa çš„ middleware å¯ä»¥å®Œæˆæ·»åŠ  CORS headersã€è®°å½•æ—¥å¿—ã€å†…å®¹å‹ç¼©ç­‰å·¥ä½œã€‚middleware æœ€ä¼˜ç§€çš„ç‰¹æ€§å°±æ˜¯å¯ä»¥è¢«é“¾å¼ç»„åˆã€‚ä½ å¯ä»¥åœ¨ä¸€ä¸ªé¡¹ç›®ä¸­ä½¿ç”¨å¤šä¸ªç‹¬ç«‹çš„ç¬¬ä¸‰æ–¹ middlewareã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;p&gt;ç›¸å¯¹äº Express æˆ–è€… Koa çš„ middlewareï¼ŒRedux middleware è¢«ç”¨äºè§£å†³ä¸åŒçš„é—®é¢˜ï¼Œä½†å…¶ä¸­çš„æ¦‚å¿µæ˜¯ç±»ä¼¼çš„ã€‚å®ƒæä¾›çš„æ˜¯ä½äº action è¢«å‘èµ·ä¹‹åï¼Œåˆ°è¾¾ reducer ä¹‹å‰çš„æ‰©å±•ç‚¹ã€‚ ä½ å¯ä»¥åˆ©ç”¨ Redux middleware æ¥è¿›è¡Œæ—¥å¿—è®°å½•ã€åˆ›å»ºå´©æºƒæŠ¥å‘Šã€è°ƒç”¨å¼‚æ­¥æ¥å£æˆ–è€…è·¯ç”±ç­‰ç­‰ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;å¯ä»¥ç®€å•ç†è§£ä¸ºï¼Œä¸­é—´ä»¶æ˜¯å¯ä»¥åœ¨actionåˆ°è¾¾reducerä¹‹å‰åšä¸€äº›äº‹æƒ…çš„å±‚ã€‚ï¼ˆæœ‰æ„æ€çš„æ˜¯ï¼Œsagaåº”è¯¥æ˜¯åœ¨reducerè¢«è§¦å‘ä¹‹åæ‰è§¦å‘çš„ã€‚TODO, éœ€è¦è¿›ä¸€æ­¥éªŒè¯ï¼‰&lt;/p&gt;

&lt;h2 id=&quot;javascript-generator&quot;&gt;Javascript Generator&lt;/h2&gt;
&lt;p&gt;åœ¨ä½¿ç”¨Sagaä¹‹å‰ï¼Œå»ºè®®å…ˆäº†è§£Javascriptç”Ÿæˆå™¨ï¼Œå› ä¸ºSagaçš„å‰¯ä½œç”¨éƒ½æ˜¯é€šè¿‡ç”Ÿæˆå™¨æ¥å®ç°çš„ã€‚&lt;/p&gt;

&lt;p&gt;å¯ä»¥åœ¨é˜®ä¸€å³°çš„&lt;a href=&quot;http://es6.ruanyifeng.com/&quot;&gt;ECMAScript 6 å…¥é—¨&lt;/a&gt;: &lt;a href=&quot;http://es6.ruanyifeng.com/#docs/generator&quot;&gt;Generator å‡½æ•°çš„è¯­æ³•&lt;/a&gt;å’Œ&lt;a href=&quot;http://es6.ruanyifeng.com/#docs/generator-async&quot;&gt;Generator å‡½æ•°çš„å¼‚æ­¥åº”ç”¨&lt;/a&gt;ç« èŠ‚ä¸­äº†è§£æ›´å¤šç»†èŠ‚ã€‚&lt;/p&gt;

&lt;h1 id=&quot;å¦‚ä½•ä½¿ç”¨&quot;&gt;å¦‚ä½•ä½¿ç”¨&lt;/h1&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/redux-saga/redux-saga&quot;&gt;redux-sageå®˜æ–¹æ–‡æ¡£&lt;/a&gt;æœ‰å¾ˆè¯¦ç»†çš„ä½¿ç”¨è¯´æ˜ï¼Œè¿™é‡Œåªåšç®€å•çš„ä¸Šæ‰‹è¯´æ˜ã€‚&lt;/p&gt;

&lt;h2 id=&quot;å®‰è£…redux-sage&quot;&gt;å®‰è£…redux-sage&lt;/h2&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;npm &lt;span class=&quot;nb&quot;&gt;install&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--save&lt;/span&gt; redux-saga
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h2 id=&quot;ç»™reduxæ·»åŠ ä¸­é—´ä»¶&quot;&gt;ç»™reduxæ·»åŠ ä¸­é—´ä»¶&lt;/h2&gt;
&lt;p&gt;åœ¨å®šä¹‰ç”Ÿæˆstoreçš„åœ°æ–¹ï¼Œå¼•å…¥å¹¶åŠ å…¥redux-sageä¸­é—´ä»¶ã€‚&lt;/p&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;createStore&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;applyMiddleware&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;redux&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;createSagaMiddleware&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;redux-saga&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;reducer&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;./reducers&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;mySaga&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;./sagas&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// create the saga middleware&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;sagaMiddleware&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;createSagaMiddleware&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// mount it on the Store&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;store&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;createStore&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;reducer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;applyMiddleware&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;sagaMiddleware&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// then run the saga&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;sagaMiddleware&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;mySaga&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h2 id=&quot;å‰¯ä½œç”¨&quot;&gt;å‰¯ä½œç”¨&lt;/h2&gt;
&lt;p&gt;å‰¯ä½œç”¨ï¼Œé¡¾åæ€ä¹‰ï¼Œåœ¨ä¸»è¦ä½œç”¨ï¼ˆactionè§¦å‘reducerï¼‰ä¹‹å¤–ï¼Œç”¨æ¥å¤„ç†å…¶ä»–ä¸šåŠ¡é€»è¾‘ã€‚redux-sagaæä¾›äº†å‡ ç§äº§ç”Ÿå‰¯ä½œç”¨çš„æ–¹å¼, ä¸»è¦ç”¨åˆ°äº†æœ‰ä¸¤ç§&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;takeEvery&lt;/code&gt;å’Œ&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;takeLates&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;takeEvery&lt;/code&gt;ä¼šåœ¨æ¥åˆ°ç›¸åº”çš„actionä¹‹åä¸æ–­äº§ç”Ÿæ–°çš„å‰¯ä½œç”¨ã€‚ æ¯”å¦‚ï¼Œåšä¸€ä¸ªè®¡æ•°å™¨æŒ‰é’®ï¼Œç”¨æˆ·éœ€è¦ä¸æ–­çš„ç‚¹å‡»æŒ‰é’®ï¼Œå¯¹åå°æ•°æ®æ›´æ–°ï¼Œè¿™é‡Œå¯ä»¥ä½¿ç”¨&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;takeEvery&lt;/code&gt;æ¥è§¦å‘ã€‚&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;takeLatest&lt;/code&gt;åœ¨ç›¸åŒçš„actionè¢«è§¦å‘å¤šæ¬¡çš„æ—¶å€™ï¼Œä¹‹å‰çš„å‰¯ä½œç”¨å¦‚æœæ²¡æœ‰æ‰§è¡Œå®Œï¼Œä¼šè¢«å–æ¶ˆæ‰ï¼Œåªæœ‰æœ€åä¸€æ¬¡actionè§¦å‘çš„å‰¯ä½œç”¨å¯ä»¥æ‰§è¡Œå®Œã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªåˆ·æ–°æŒ‰é’®ï¼Œ è®©ç”¨æˆ·å¯ä»¥æ‰‹åŠ¨çš„ä»åå°åˆ·æ–°æ•°æ®ï¼Œ å½“ç”¨æˆ·ä¸åœå•æœºåˆ·æ–°çš„æ—¶å€™ï¼Œ åº”è¯¥æœ€æ–°ä¸€æ¬¡çš„è¯·æ±‚æ•°æ®è¢«åˆ·æ–°åœ¨é¡µé¢ä¸Šï¼Œè¿™é‡Œå¯ä»¥ä½¿ç”¨&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;takeLatest&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;call&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;put&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;redux-saga/effects&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;takeEvery&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;redux-saga&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;fetchData&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;action&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
   &lt;span class=&quot;k&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;data&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;yield&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;call&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Api&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;fetchUser&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;action&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;payload&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;yield&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;put&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;FETCH_SUCCEEDED&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
   &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;catch&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;yield&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;put&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;FETCH_FAILED&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
   &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;watchFetchData&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;yield&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;takeEvery&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;FETCH_REQUESTED&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;fetchData&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;æ³¨æ„ï¼Œ&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;takeEvery&lt;/code&gt;ç¬¬ä¸€ä¸ªå‚æ•°å¯ä»¥æ˜¯æ•°ç»„æˆ–è€…æ–¹æ³•ã€‚ ä¹Ÿå¯ä»¥æœ‰ç¬¬ä¸‰ä¸ªå‚æ•°ç”¨æ¥ä¼ é€’å˜é‡ç»™æ–¹æ³•ã€‚&lt;/p&gt;

&lt;h2 id=&quot;callæ–¹æ³•&quot;&gt;callæ–¹æ³•&lt;/h2&gt;
&lt;p&gt;callæœ‰äº›ç±»ä¼¼Javascriptä¸­çš„callå‡½æ•°ï¼Œ ä¸åŒçš„æ˜¯å®ƒå¯ä»¥æ¥å—ä¸€ä¸ªè¿”å›promiseçš„å‡½æ•°ï¼Œä½¿ç”¨ç”Ÿæˆå™¨çš„æ–¹å¼æ¥æŠŠå¼‚æ­¥å˜åŒæ­¥ã€‚&lt;/p&gt;

&lt;h2 id=&quot;putæ–¹æ³•&quot;&gt;putæ–¹æ³•&lt;/h2&gt;
&lt;p&gt;putå°±æ˜¯reduxçš„dispatchï¼Œç”¨æ¥è§¦å‘reduceræ›´æ–°store&lt;/p&gt;

&lt;h1 id=&quot;æœ‰ä»€ä¹ˆå¼Šç«¯&quot;&gt;æœ‰ä»€ä¹ˆå¼Šç«¯&lt;/h1&gt;
&lt;p&gt;ç›®å‰åœ¨é¡¹ç›®å®è·µä¸­é‡åˆ°çš„ä¸€äº›é—®é¢˜ï¼š&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;redux-sagaæ¨¡å‹çš„ç†è§£å’Œå­¦ä¹ éœ€è¦æŠ•å…¥å¾ˆå¤šç²¾åŠ›&lt;/li&gt;
  &lt;li&gt;å› ä¸ºéœ€è¦ç”¨actionè§¦å‘ï¼Œæ‰€ä»¥ä¼šäº§ç”Ÿå¾ˆå¤šå¯¹äºreduceræ— ç”¨çš„action, ä½†æ˜¯reducerä¸€æ ·ä¼šè·‘ä¸€è½®ï¼Œè™½ç„¶ç›®å‰æ²¡æœ‰è§‚æµ‹åˆ°æ€§èƒ½ä¸‹é™ï¼Œä½†è¿˜æ˜¯æœ‰è®¡ç®—å¼€é”€&lt;/li&gt;
  &lt;li&gt;åœ¨actionçš„å®šä¹‰ä¸Šè¦è°¨æ…ï¼Œé¿å…actionåœ¨sagaå’Œreducerä¹‹é—´é‡å¤è§¦å‘ï¼Œé€ æˆæ­»å¾ªç¯&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;åè®°&quot;&gt;åè®°&lt;/h1&gt;
&lt;p&gt;æ€»ä½“è€Œè¨€ï¼Œå¯¹äºredux-sagaçš„ç¬¬ä¸€æ¬¡å°è¯•è¿˜æ˜¯å¾ˆæ»¡æ„çš„ã€‚ åœ¨ä¸šåŠ¡é€»è¾‘å±‚ï¼Œå¯ä»¥ç®€åŒ–ä»£ç ï¼Œä½¿ä»£ç æ›´åŠ å®¹æ˜“é˜…è¯»ã€‚ åœ¨é‡ç”¨æ–¹é¢ï¼Œè§£è€¦æ˜¾ç¤ºå±‚å’Œä¸šåŠ¡å±‚ä¹‹åï¼Œ ä»£ç çš„é‡ç”¨åº¦ä¹Ÿå¾—åˆ°äº†æå‡ã€‚&lt;/p&gt;

&lt;h2 id=&quot;é€‰æ‹©sagaçš„åŸå› &quot;&gt;é€‰æ‹©Sagaçš„åŸå› &lt;/h2&gt;
&lt;p&gt;å¼€å§‹çš„æ—¶å€™ä¸€ç›´åœ¨çŠ¹è±«æ˜¯å¦éœ€è¦ä½¿ç”¨Sagaæˆ–thunkï¼Œå› ä¸ºå¹¶ä¸èƒ½å¾ˆå¥½çš„æŠŠæ¡è¿™ä¸¤è€…åˆ°åº•è§£å†³äº†ä»€ä¹ˆé—®é¢˜ã€‚ä¹‹åï¼Œåœ¨æµè§ˆæ–‡ç« çš„æ—¶å€™çœ‹åˆ°äº†&lt;a href=&quot;http://blog.isquaredsoftware.com/2017/01/idiomatic-redux-thoughts-on-thunks-sagas-abstraction-and-reusability/&quot;&gt;ä¸€éå¯¹æ¯”ä¸¤è€…çš„é•¿æ–‡&lt;/a&gt;ï¼Œåˆ—å‡ºäº†ä¸å°‘å¼€å‘è€…å¯¹ä¸¤è€…çš„æ‹…å¿§å’Œäº‰è®ºï¼Œå…¶ä¸­ä¸ä¹é—ªå…‰çš„è§‚ç‚¹ï¼Œé•¿æ–‡çš„æœ€åä½œè€…å†™åˆ°ï¼šâ€œä¸ç®¡æ˜¯å¦ç”¨å¾—ä¸Šï¼Œä½ éƒ½åº”è¯¥å°è¯•ä¸€ä¸‹â€ã€‚ è¿™å¥è¯ä½¿æˆ‘å†³å®šäº†å°è¯•ç”¨sagaæˆ–thunkæ¥å®è·µæŠŠå‰ç«¯åˆ†å±‚çš„è®¾æƒ³ã€‚&lt;/p&gt;

&lt;p&gt;ä¹‹æ‰€ä»¥æœ€åé€‰æ‹©äº†sagaæ˜¯å› ä¸ºè¿™æ®µ Cheng Lou çš„è§†é¢‘ï¼š
&lt;a href=&quot;https://www.youtube.com/watch?v=mVVNJKv9esE&quot;&gt;On the Spectrum of Abstraction&lt;/a&gt; (youtube)&lt;/p&gt;

&lt;p&gt;è§†é¢‘ä¸­è®²è¿°äº†åœ¨ä¸€ç§æŠ½è±¡çš„æ¦‚å¿µä¸‹å¦‚ä½•å»é€‰æ‹©ä¸€ç§æŠ€æœ¯ã€‚ å…¶ä¸­ä¸€ä¸ªç†è®ºæ˜¯ï¼šè¶Šæ˜¯ç”¨æ¥è§£å†³å…·ä½“é—®é¢˜çš„æŠ€æœ¯ï¼Œä½¿ç”¨èµ·æ¥è¶Šå®¹æ˜“ï¼Œè¶Šé«˜æ•ˆï¼Œå­¦ä¹ æˆæœ¬è¶Šä½ï¼›è¶Šæ˜¯ç”¨æ¥è§£å†³å®½æ³›é—®é¢˜çš„æŠ€æœ¯ï¼Œä½¿ç”¨èµ·æ¥è¶Šéš¾ï¼Œå­¦ä¹ æˆæœ¬è¶Šé«˜ã€‚ thunkè§£å†³çš„æ˜¯å¾ˆå…·ä½“çš„ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯åœ¨actionåˆ°è¾¾reducerä¹‹å‰åšä¸€äº›å…¶ä»–çš„ä¸šåŠ¡ï¼Œæ¯”å¦‚fetchåç«¯, å®ƒåœ¨åšè¿™ä»¶äº‹çš„ä¸Šå¾ˆé«˜æ•ˆã€‚è€ŒSagaè§£å†³çš„é—®é¢˜è¦æ›´å®½æ³›ä¸€äº›ï¼Œå› ä¸ºsagaåªæ˜¯æ‹¦æˆªäº†actionï¼Œè‡³äºåšä»€ä¹ˆï¼Œå¼€å‘è€…éœ€è¦è‡ªå·±æ¥è€ƒè™‘ï¼Œå¯ä»¥æ˜¯fetchåç«¯ï¼Œä¹Ÿå¯ä»¥æ˜¯æ›´æ–°redux store, ç”šè‡³å¯ä»¥æ‰§è¡Œactionå¸¦è¿›æ¥çš„callbackã€‚ å¾ˆæ˜¾ç„¶å¯¹äºä¸€ä¸ª&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ä¸šåŠ¡å±‚&lt;/code&gt;æ¥è¯´,sagaä¼šæ˜¯ä¸€ä¸ªæ›´åˆé€‚çš„é€‰æ‹©ï¼Œä½†åŒæ—¶ä¹Ÿå¸¦æ¥äº†å­¦ä¹ æˆæœ¬çš„æé«˜ã€‚&lt;/p&gt;
</description>
        <pubDate>Sun, 05 Mar 2017 17:03:51 +0800</pubDate>
        <link>http://frankwang.cn/react/2017/03/05/redux-saga.html</link>
        <guid isPermaLink="true">http://frankwang.cn/react/2017/03/05/redux-saga.html</guid>
        
        
        <category>react</category>
        
      </item>
    
      <item>
        <title>React Native 0.27.x adopt to xcode 8</title>
        <description>&lt;h1 id=&quot;react-native-0270-adopt-to-xcode-8&quot;&gt;React Native 0.27.0 adopt to xcode 8&lt;/h1&gt;

&lt;h1 id=&quot;rctsrwebsocketm-error&quot;&gt;RCTSRWEBSOCKET.M error&lt;/h1&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Ignoring return value of function declared with warn_unused_result attribute&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Find line&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;SecRandomCopyBytes(kSecRandomDefault, sizeof(uint32_t), (uint8_t *)mask_key);&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Change to&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;(void)SecRandomCopyBytes(kSecRandomDefault, sizeof(uint32_t), (uint8_t *)mask_key);&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Find line&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;SecRandomCopyBytes(kSecRandomDefault, keyBytes.length, keyBytes.mutableBytes);&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Change to&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;(void)SecRandomCopyBytes(kSecRandomDefault, keyBytes.length, keyBytes.mutableBytes);&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h1 id=&quot;rctscrollviewm-error&quot;&gt;RCTSCROLLVIEW.M error&lt;/h1&gt;

&lt;p&gt;refer to &lt;a href=&quot;https://github.com/facebook/react-native/commit/7c8b91442b3547cf94c752f234210bef0848c00a&quot;&gt;#7c8b914&lt;/a&gt; to change the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;node_modules/react-native/React/Views/RCTScrollView.m&lt;/code&gt; file.&lt;/p&gt;

&lt;p&gt;Then find below code in the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;RCTScrollView.m&lt;/code&gt; file:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;- (NSArray&amp;lt;UIView *&amp;gt; *)reactSubviews
{
  if (_contentView &amp;amp;&amp;amp; _scrollView.refreshControl) {
    return @[_contentView, _scrollView.refreshControl];
  }
return _contentView ? @[_contentView] : @[];
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;change to&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;- (NSArray&amp;lt;UIView *&amp;gt; *)reactSubviews
{
  if (_contentView &amp;amp;&amp;amp; _scrollView.rctRefreshControl) {
    return @[_contentView, _scrollView.rctRefreshControl];
  }
  return _contentView ? @[_contentView] : @[];
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;a href=&quot;https://gist.github.com/yanqiw/5478681bb8eb1a7037f7a5b904a83f5e&quot;&gt;Example of the changed &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;RCTScrollView.m&lt;/code&gt; in Gist&lt;/a&gt;&lt;/p&gt;
</description>
        <pubDate>Wed, 05 Oct 2016 14:23:40 +0800</pubDate>
        <link>http://frankwang.cn/2016/10/05/react-native-adopt-to-xcode8.html</link>
        <guid isPermaLink="true">http://frankwang.cn/2016/10/05/react-native-adopt-to-xcode8.html</guid>
        
        
      </item>
    
      <item>
        <title>React Nativeå…¥é—¨æ€»ç»“</title>
        <description>&lt;h1 id=&quot;react-nativeå…¥é—¨æ€»ç»“&quot;&gt;React Nativeå…¥é—¨æ€»ç»“&lt;/h1&gt;
&lt;p&gt;ç”¨Javascript, HTML, CSSå¼€å‘APPå·²ç»è¢«è°ˆè®ºäº†å¾ˆå¤šå¹´äº†ï¼Œåœ¨&lt;a href=&quot;https://facebook.github.io/react-native/&quot;&gt;React Native&lt;/a&gt;ä¹‹å‰ï¼Œ &lt;a href=&quot;https://cordova.apache.org/&quot;&gt;Cordova&lt;/a&gt;ä¸€ç›´æ˜¯é¦–é€‰ï¼Œ åœ¨Cordovaçš„åŸºç¡€ä¸Šæœ‰å¾ˆå¤šä¼˜ç§€çš„æ¡†æ¶ï¼Œä½†æ˜¯WebViewçš„æ€§èƒ½å§‹ç»ˆæ˜¯çº¯H5æŠ€æœ¯çš„APPæ— æ³•è·¨è¶Šçš„æ²Ÿï¼Œ åœ¨ç”¨æˆ·ä½“éªŒè‡³ä¸Šçš„ä»Šå¤©ï¼Œæ€§èƒ½é—®é¢˜å˜å¾—å°¤ä¸ºé‡è¦ã€‚ React Nativeé€šè¿‡ç¼–è¯‘å°†webçš„ç»„ä»¶è½¬æ¢æˆnativeçš„ç»„ä»¶ï¼Œå¾ˆå¤§çš„æå‡äº†APPçš„æ€§èƒ½ã€‚ ç›®å‰ï¼ŒReact Nativeæ”¯æŒAndroidå’ŒiOSä¸¤å¤§ä¸»æµå¹³å°ï¼Œå¹¶è¢«åº”ç”¨åœ¨å¾ˆå¤šçŸ¥åé¡¹ç›®ä¸­ã€‚&lt;/p&gt;

&lt;p&gt;ä¸‹é¢æ˜¯cordovaå’ŒReact Nativeçš„æ¶æ„å›¾ï¼Œå¯ä»¥å¾ˆå®¹æ˜“çœ‹å‡ºä¸¤è€…çš„ä¸åŒä¹‹å¤„ï¼š&lt;/p&gt;

&lt;h2 id=&quot;cordovaæ¶æ„&quot;&gt;Cordovaæ¶æ„&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://cordova.apache.org/docs/en/latest/guide/overview/index.html&quot;&gt;å›¾ç‰‡æ¥è‡ªCordovaå®˜ç½‘&lt;/a&gt;
&lt;img src=&quot;https://cordova.apache.org/static/img/guide/cordovaapparchitecture.png&quot; alt=&quot;Cordovaæ¶æ„&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;react-nativeæ¶æ„&quot;&gt;React Nativeæ¶æ„&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;http://www.ibm.com/developerworks/library/mo-bluemix-react-native-ios8/&quot;&gt;å›¾ç‰‡æ¥è‡ªReact Native: Into a new world of rapid iOS development&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://www.ibm.com/developerworks/library/mo-bluemix-react-native-ios8/Figure1.png&quot; alt=&quot;React Nativeæ¶æ„&quot; /&gt;&lt;/p&gt;

&lt;h1 id=&quot;å‡†å¤‡å·¥ä½œ&quot;&gt;å‡†å¤‡å·¥ä½œ&lt;/h1&gt;
&lt;p&gt;å†å¼€å§‹React Nativeä¹‹å‰ï¼Œéœ€è¦å‡†å¤‡å®‰è£…ï¼š&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Node&lt;/li&gt;
  &lt;li&gt;Android SKD (for android)&lt;/li&gt;
  &lt;li&gt;Xcode (for iOS)&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;å¼€å‘ç”¨å…·&quot;&gt;å¼€å‘ç”¨å…·:&lt;/h2&gt;
&lt;p&gt;å› ä¸ºå¼€å‘React Nativeç”¨åˆ°çš„æ˜¯Javascriptï¼Œæ‰€ä»¥å¯é€‰æ‹©çš„ç©ºé—´å¾ˆå¤§ï¼Œé¦–æ¨çš„è¿˜æ˜¯&lt;a href=&quot;https://www.jetbrains.com/webstorm/&quot;&gt;JetBrains&lt;/a&gt;å®¶çš„&lt;a href=&quot;https://www.jetbrains.com/webstorm/&quot;&gt;WebStorm&lt;/a&gt;ï¼Œ å¦‚æœè§‰å¾—å¤ªé‡GitHubå®¶çš„&lt;a href=&quot;https://atom.io/&quot;&gt;Atom&lt;/a&gt;ä¹Ÿæ˜¯ä¸é”™çš„é€‰æ‹©ï¼ŒåŠ ä¸ŠFacebookæ–°æ¨å‡ºçš„æ’ä»¶&lt;a href=&quot;http://nuclide.io/&quot;&gt;Nuclide&lt;/a&gt;ä¹Ÿæ˜¯å¾ˆå¼ºå¤§çš„ã€‚&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;æ³¨æ„ï¼šåœ¨Windowsä¸Šé¢æœ‰æ—¶å€™Atomä¼šå ç”¨å¤§é‡CPUèµ„æºï¼Œå¯¼è‡´ç¬”è®°æœ¬å‘çƒ­ä¸¥é‡. å»ºè®®åœ¨windowsä¸Šä½¿ç”¨&lt;a href=&quot;https://www.sublimetext.com/&quot;&gt;Sublime&lt;/a&gt;ç¼–è¾‘å™¨ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Androidå¼€å‘æ¨è&lt;a href=&quot;http://developer.android.com/intl/zh-cn/tools/studio/index.html&quot;&gt;Android Studio&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;p&gt;iOSå¼€å‘æ²¡å¾—é€‰ï¼Œç›´æ¥ä»App Storeä¸‹è½½xCodeã€‚&lt;/p&gt;

&lt;h2 id=&quot;å®‰è£…react-native&quot;&gt;å®‰è£…React Native&lt;/h2&gt;
&lt;p&gt;ä¸‹é¢æ­¥éª¤åŸºäº&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Mac OS X&lt;/code&gt;ç³»ç»Ÿã€‚ å¯¹äºå…¶ä»–æ“ä½œç³»ç»Ÿï¼Œä½ å¯ä»¥å‚è€ƒ&lt;a href=&quot;https://facebook.github.io/react-native/docs/getting-started.html&quot;&gt;React Nativeå®˜ç½‘&lt;/a&gt;å®‰è£…&lt;/p&gt;

&lt;h3 id=&quot;å®‰è£…node&quot;&gt;å®‰è£…Node&lt;/h3&gt;
&lt;h4 id=&quot;å®‰è£…homebrew&quot;&gt;å®‰è£…Homebrew&lt;/h4&gt;
&lt;p&gt;åœ¨Macä¸Šä½¿ç”¨&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;brew&lt;/code&gt;å®‰è£…nodejsæ˜¯éå¸¸æ–¹ä¾¿çš„ï¼Œ å¦‚æœä½ å·²ç»æœ‰äº†&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Homebrew&lt;/code&gt;å¯ä»¥ç›´æ¥è·³è¿‡è¿™æ­¥ã€‚
æ‰“å¼€Terminalè¿è¡Œï¼š&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;/usr/bin/ruby &lt;span class=&quot;nt&quot;&gt;-e&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;$(&lt;/span&gt;curl &lt;span class=&quot;nt&quot;&gt;-fsSL&lt;/span&gt; https://raw.githubusercontent.com/Homebrew/install/master/install&lt;span class=&quot;si&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;å®‰è£…node-1&quot;&gt;å®‰è£…Node&lt;/h4&gt;
&lt;p&gt;React Nativeéœ€è¦4.0ä»¥ä¸Šçš„ç‰ˆæœ¬ã€‚Homebrewä¼šå®‰è£…æœ€æ–°çš„6.0ç‰ˆæœ¬ã€‚&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;npm &lt;span class=&quot;nb&quot;&gt;install&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-g&lt;/span&gt; react-native-cli
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;å®‰è£…android-studio&quot;&gt;å®‰è£…Android Studio&lt;/h3&gt;
&lt;p&gt;åœ¨android stuidoå®˜ç½‘ä¸‹è½½å®‰è£…åŒ…å¹¶å®‰è£…ã€‚å®‰è£…åï¼Œéœ€è¦ä¸‹è½½SKDã€‚é€‰æ‹©ï¼š&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Android Studio &amp;gt; Preference &amp;gt; System Settings &amp;gt; Android SDK&lt;/code&gt;ä¸­é€‰æ‹©ç›¸åº”çš„androidç‰ˆæœ¬çš„SKDã€‚&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;å»ºè®®ä½¿ç”¨5.0ä»¥ä¸Šçš„Androidç‰ˆæœ¬ç”¨äºå¼€å‘å’Œè°ƒè¯•ï¼Œç¨³å®šæ€§ä¼šè¿œé«˜äº4.0+ç‰ˆæœ¬ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;è®¾ç½®&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ANDROID_HOME&lt;/code&gt;ç¯å¢ƒå˜é‡ï¼Œè¿™éƒ¨å¾ˆé‡è¦ï¼Œå¦‚æœç¨åReact Nativeè¿è¡Œä¸äº†ï¼Œå¤šåŠæ˜¯è¿™é‡Œè®¾ç½®çš„ä¸æ­£ç¡®ã€‚
æ‰“å¼€ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;~/.bashrc&lt;/code&gt;æˆ–&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;~/.bash_profile&lt;/code&gt;, å¦‚æœæ²¡æœ‰è¿è¡Œ&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;touch&lt;/span&gt; ~/.bashrc &lt;span class=&quot;c&quot;&gt;# or ~/.bash_profile&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;åœ¨æ–‡ä»¶ä¸­è¾“å…¥ä¸‹é¢å‘½ä»¤ï¼š&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# å¦‚æœSDKä¸æ˜¯é€šè¿‡android studioå®‰è£…çš„ï¼Œ é‚£ä¹ˆå®ƒå¯èƒ½åœ¨ä»¥ä¸‹è·¯å¾„:&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# /usr/local/opt/android-sdk&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;ANDROID_HOME&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;~/Library/Android/sdk
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;å®‰è£…watchman&quot;&gt;å®‰è£…Watchman&lt;/h3&gt;
&lt;p&gt;å»ºè®®å®‰è£…Watchmanæ¥ç›‘æ§æ–‡ä»¶å¤¹å˜åŒ–, è‡ªåŠ¨è§¦å‘ä¸€äº›äº‹ä»¶&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;brew &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;watchman
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;å®‰è£…genymotion&quot;&gt;å®‰è£…Genymotion&lt;/h3&gt;
&lt;p&gt;å¼ºçƒˆæ¨èçš„æ¨¡æ‹Ÿå™¨ï¼Œå¯ä»¥æ–¹ä¾¿çš„å®‰è£…ä¸åŒå‹å·çš„Androidæ‰‹æœºæ¨¡æ‹Ÿå™¨ã€‚&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;åœ¨&lt;a href=&quot;https://www.genymotion.com/&quot;&gt;Genymotion&lt;/a&gt;å®˜ç½‘æ³¨å†Œè´¦å·&lt;/li&gt;
  &lt;li&gt;ç™»é™†ååœ¨&lt;a href=&quot;https://www.genymotion.com/download/&quot;&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ä¸‹è½½é¡µé¢&lt;/code&gt;&lt;/a&gt;ä¸‹è½½å®‰è£…åŒ…&lt;/li&gt;
  &lt;li&gt;æ ¹æ®è¯´æ˜å®‰è£…&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;åˆ›å»ºé¡¹ç›®&quot;&gt;åˆ›å»ºé¡¹ç›®&lt;/h1&gt;
&lt;p&gt;åˆ›å»ºä¸€ä¸ªReact Nativeé¡¹ç›®å¾ˆç®€å•ï¼Œè‡³äºè¦ä¸€è¡Œå‘½ä»¤ï¼š&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;react-native init AwesomeProject
&lt;span class=&quot;nb&quot;&gt;cd &lt;/span&gt;AwesomeProject
npm &lt;span class=&quot;nb&quot;&gt;install&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h2 id=&quot;è¿è¡Œandroidé¡¹ç›®&quot;&gt;è¿è¡ŒAndroidé¡¹ç›®&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;è¿è¡Œä¸€ä¸ªGenymotionçš„è™šæ‹Ÿæœº&lt;/li&gt;
  &lt;li&gt;åœ¨&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;AwesomeProject&lt;/code&gt;æ–‡ä»¶å¤¹ä¸‹è¿è¡Œ&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;react-native run-android&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;åˆšåˆšåˆå§‹åŒ–çš„é¡¹ç›®ä¼šè¢«ç¼–è¯‘å¹¶å®‰è£…åœ¨è™šæ‹Ÿæœºä¸­ï¼Œ åœ¨ç¼–è¾‘å™¨ä¸­æ‰“å¼€&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;AwesomeProject&lt;/code&gt;æ–‡ä»¶å¤¹ï¼Œå°±å¯ä»¥è¿›è¡Œå¼€å‘é¡¹ç›®äº†ã€‚&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;ç¬¬ä¸€æ¬¡å¯åŠ¨æ—¶ä¼šä¸‹è½½ä¾èµ–åŒ…ï¼Œéœ€è¦è€å¿ƒç­‰å¾…å¾ˆä¹…ã€‚ æ ¹æ®ç½‘ç»œæƒ…å†µï¼Œä½ å¯èƒ½éœ€è¦è®¾ç½®ä»£ç†æ‰èƒ½å®Œæˆä¸‹è½½ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;è¿è¡Œiosé¡¹ç›®&quot;&gt;è¿è¡ŒiOSé¡¹ç›®&lt;/h2&gt;
&lt;p&gt;åœ¨&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;AwesomeProject&lt;/code&gt;æ–‡ä»¶å¤¹ä¸‹è¿è¡Œ&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;react-native run-ios&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;h1 id=&quot;ç¬¬ä¸€æª&quot;&gt;ç¬¬ä¸€æª&lt;/h1&gt;
&lt;p&gt;åœ¨è™šæ‹Ÿè®¾å¤‡ä¸Šè¿è¡Œçš„æ—¶å€™ï¼Œä¸€åˆ‡ä¼šå¾ˆé¡ºåˆ©ï¼Œä½†æ˜¯ç¬¬ä¸€æ¬¡å°†é¡¹ç›®æ”¾åˆ°çœŸå®androidè®¾å¤‡ä¸­è¿è¡Œæ—¶ï¼Œå¤§å¤šæ•°äººéƒ½ä¼šä¸­ä¸ŠReact Nativeçš„ç¬¬ä¸€æªï¼&lt;a href=&quot;https://github.com/facebook/react-native/issues/4952&quot;&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Can't find variable: _fbBatchedBridge&lt;/code&gt;&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://cloud.githubusercontent.com/assets/587438/11986090/a1a814d6-a999-11e5-8120-82a6391d0531.png&quot; alt=&quot;Can't find variable: _fbBatchedBridge&quot; /&gt;&lt;/p&gt;

&lt;p&gt;æœ‰æ—¶ä¹Ÿå¯èƒ½æ˜¯ä¸€ä¸ªå¤§ç™½é¡µé¢ã€‚&lt;/p&gt;

&lt;p&gt;è§£å†³åŠæ³•ä¹Ÿå¾ˆç®€å•ï¼Œåœ¨&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Dev setting&lt;/code&gt;é‡Œé¢è®¾ç½®&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ç”µè„‘çš„IP:8081&lt;/code&gt;ï¼Œå†åˆ·æ–°å°±å¯ä»¥è§£å†³ã€‚&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;å¾ˆå¤šå›½å†…å®šåˆ¶ç‰ˆçš„androidç³»ç»Ÿä¸èƒ½é€šè¿‡menué”®è°ƒå‡º&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Dev setting&lt;/code&gt;ã€‚ è¿™æ—¶éœ€è¦åœ¨æ‰‹æœºçš„&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;è®¾ç½®-&amp;gt;åº”ç”¨-&amp;gt;[é¡¹ç›®app]-&amp;gt;æƒé™ç®¡ç†&lt;/code&gt;ä¸­å¯åŠ¨&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;æ˜¾ç¤ºæ‚¬æµ®çª—å£ã€‚ &lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h1 id=&quot;ä¿®æ”¹é¡¹ç›®&quot;&gt;ä¿®æ”¹é¡¹ç›®&lt;/h1&gt;
&lt;h2 id=&quot;android&quot;&gt;Android&lt;/h2&gt;
&lt;p&gt;ä½¿ç”¨ä¹‹å‰ä»‹ç»äººä»»ä½•ä¸€æ¬¾ç¼–è¾‘å™¨æ‰“å¼€&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;AwesomeProject&lt;/code&gt;ä¸­çš„&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;index.android.js&lt;/code&gt;,å¹¶åŠ å…¥è‡ªå·±çš„ä»£ç ï¼Œå¼€å§‹ä½ çš„é¡¹ç›®ã€‚&lt;/p&gt;

&lt;h2 id=&quot;ios&quot;&gt;iOS&lt;/h2&gt;
&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;index.ios.js&lt;/code&gt;æ˜¯iOSçš„å…¥å£æ–‡ä»¶ï¼Œå¯ä»¥å‚è€ƒ&lt;a href=&quot;http://reactnative.cn/&quot;&gt;React Nativeå®˜æ–¹ç½‘ç«™&lt;/a&gt;è¿›è¡Œé¡¹ç›®å¼€å‘ï¼Œè¿™é‡Œä¸è¿‡å¤šä»‹ç»ã€‚&lt;/p&gt;

&lt;h1 id=&quot;è°ƒè¯•&quot;&gt;è°ƒè¯•&lt;/h1&gt;
&lt;h2 id=&quot;åœ¨androidæ¨¡æ‹Ÿå™¨ä¸Šè°ƒè¯•&quot;&gt;åœ¨Androidæ¨¡æ‹Ÿå™¨ä¸Šè°ƒè¯•&lt;/h2&gt;
&lt;p&gt;è¿è¡Œ&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Genymontion&lt;/code&gt;é€‰æ‹©ä¸€ä¸ªæ¨¡æ‹Ÿå™¨è¿è¡Œã€‚åœ¨é¡¹ç›®è·¯å¾„è¿è¡Œ&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;react-native run-android&lt;/code&gt;ã€‚é¡¹ç›®å¯åŠ¨åï¼Œå¯ä»¥é€šè¿‡èœå•æ¨¡æ‹Ÿé”®è°ƒå‡ºå¼€å‘è€…èœå•ï¼Œé€‰æ‹©reload javascriptæ¥åˆ·æ–°ä¿®æ”¹åçš„ä»£ç ã€‚ä¹Ÿå¯ä»¥å¼€å¯è°ƒ.è¯•æ¨¡å¼ã€‚&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;å¼€å¯è°ƒè¯•æ¨¡å¼çš„æ—¶å€™ä¼šå¼¹å‡ºæµè§ˆå™¨ï¼Œè¿™é‡Œéœ€è¦æ‰‹åŠ¨æ‰“å¼€&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;å¼€å‘è€…å·¥å…·&lt;/code&gt;æ‰èƒ½çœ‹åˆ°æ§åˆ¶å°å’Œè°ƒè¯•&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;åœ¨androidè®¾å¤‡ä¸Šè°ƒè¯•&quot;&gt;åœ¨Androidè®¾å¤‡ä¸Šè°ƒè¯•&lt;/h2&gt;
&lt;p&gt;åœ¨Androidè®¾å¤‡ä¸Šæ‰“å¼€è°ƒè¯•æ¨¡å¼ï¼Œ å¹¶å°†è®¾å¤‡é€šè¿‡æ•°æ®çº¿è¿æ¥åˆ°ç”µè„‘ä¸Šè¿è¡Œ&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;react-native run-android&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;è¯·å…³é—­å…¶ä»–androidè™šæ‹Ÿæœºï¼Œä»¥é¿å…å®‰è£…åº”ç”¨åˆ°è®¾å¤‡æ—¶å‡ºç°é”™è¯¯ã€‚å¦‚æœè®¾å¤‡ä¸Šå¯åŠ¨åº”ç”¨åç™½å±ï¼Œè¯·å‚è€ƒ&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ç¬¬ä¸€æª&lt;/code&gt;è¿™ä¸€æ®µã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h1 id=&quot;å‘å¸ƒ&quot;&gt;å‘å¸ƒ&lt;/h1&gt;
&lt;p&gt;å¾…ç»­&lt;/p&gt;

&lt;h1 id=&quot;åç»­åæ€&quot;&gt;åç»­åæ€&lt;/h1&gt;
&lt;p&gt;å¾…ç»­&lt;/p&gt;
</description>
        <pubDate>Thu, 12 May 2016 15:03:57 +0800</pubDate>
        <link>http://frankwang.cn/2016/05/12/react-native-guide.html</link>
        <guid isPermaLink="true">http://frankwang.cn/2016/05/12/react-native-guide.html</guid>
        
        
      </item>
    
      <item>
        <title>ä½¿ç”¨dockeråˆ›å»ºReactJSå¼€å‘ç¯å¢ƒï¼Œå®æ—¶ç¼–è¯‘JSX</title>
        <description>&lt;h2 id=&quot;ä¸ºä»€ä¹ˆè¦ä½¿ç”¨dockeræ¥åˆ›å»ºreactjså¼€å‘ç¯å¢ƒ&quot;&gt;ä¸ºä»€ä¹ˆè¦ä½¿ç”¨dockeræ¥åˆ›å»ºReactJSå¼€å‘ç¯å¢ƒ&lt;/h2&gt;

&lt;p&gt;åˆšåˆšå¼€å§‹å­¦ä¹ ReactJSçš„æ—¶å€™ï¼ŒæŠ˜è…¾äº†å¾ˆä¹…æ‰æ­å»ºèµ·å¼€å‘ç¯å¢ƒã€‚æ‰€ä»¥ï¼Œæˆ‘å°±å¼€å§‹å°è¯•å°†ReactJSçš„ç¼–è¯‘ç¯å¢ƒæ‰“åŒ…åœ¨dockerä¸­ï¼Œå¹¶ä½¿ç”¨gulpæ¥åŠ¨æ€ç¼–è¯‘ã€‚åæ¥ä¸€ç›´åœ¨ä½¿ç”¨è¿™ä¸ªdockeré•œåƒï¼Œæ¥å¸®åŠ©æˆ‘å¼€å‘ReactJSåº”ç”¨ã€‚&lt;/p&gt;

&lt;h2 id=&quot;ä½¿ç”¨åˆ°çš„æŠ€æœ¯&quot;&gt;ä½¿ç”¨åˆ°çš„æŠ€æœ¯&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;docker&lt;/li&gt;
  &lt;li&gt;gulp&lt;/li&gt;
  &lt;li&gt;browserify&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;åˆ›å»ºé•œåƒ&quot;&gt;åˆ›å»ºé•œåƒ&lt;/h2&gt;
&lt;p&gt;é¦–å…ˆï¼Œè¦æ ¹æ®è‡ªå·±çš„éœ€è¦åˆ›å»ºä¸€ä¸ªreactJSç¼–è¯‘ç¯å¢ƒçš„é•œåƒã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Dockerfile&lt;/strong&gt;&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-yml&quot; data-lang=&quot;yml&quot;&gt;&lt;span class=&quot;s&quot;&gt;FROM node&lt;/span&gt;

&lt;span class=&quot;s&quot;&gt;RUN mkdir /runtime&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;WORKDIR /runtime&lt;/span&gt;

&lt;span class=&quot;s&quot;&gt;RUN npm init -y&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;#install gulp for auto build&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;RUN npm install --save-dev gulp gulp-uglify;&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;RUN npm install --save-dev del;&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;RUN npm install --save-dev vinyl-source-stream;&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;RUN npm install --save-dev browserify;&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;RUN npm install --save-dev reactify;&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;RUN npm install --save-dev react react-dom;&lt;/span&gt;


&lt;span class=&quot;c1&quot;&gt;#install react and build tool&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#RUN npm install -g browserify&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#RUN npm install --save-dev react react-dom babelify babel-preset-react&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;#add gulpfile&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;ADD . /runtime&lt;/span&gt;

&lt;span class=&quot;s&quot;&gt;CMD [&quot;bash&quot;, &quot;run.sh&quot;]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;gulpfile.js&lt;/code&gt;ç”¨æ¥å®šä¹‰gulpè¦åšçš„äº‹æƒ…ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;gulpfile.js&lt;/strong&gt;&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;cm&quot;&gt;/* gulpfile.js */&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// Load some modules which are installed through NPM.&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;gulp&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;gulp&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;browserify&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;browserify&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// Bundles JS.&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;del&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;del&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// Deletes files.&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;reactify&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;reactify&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// Transforms React JSX to JS.&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;source&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;vinyl-source-stream&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;


&lt;span class=&quot;c1&quot;&gt;// Define some paths.&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;paths&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;app_js&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;./src/js/app.js&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;js&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;./src/js/*.js&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// An example of a dependency task, it will be run before the css/js tasks.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// Dependency tasks should call the callback to tell the parent task that&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// they're done.&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;gulp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;task&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;clean&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;done&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;del&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;build&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;done&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;


&lt;span class=&quot;c1&quot;&gt;// Our JS task. It will Browserify our code and compile React JSX files.&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;gulp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;task&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;js&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;// Browserify/bundle the JS.&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;trigger browserify&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;browserify&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;paths&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;app_js&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;transform&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;reactify&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;bundle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;pipe&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;source&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;bundle.js&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;pipe&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;gulp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;dest&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;./src/&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;

&lt;span class=&quot;nx&quot;&gt;gulp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;task&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;called&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(){&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;Call&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// Rerun tasks whenever a file changes.&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;gulp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;task&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;watch&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;gulp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;watch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;paths&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;js&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;called&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;js&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// The default task (called when we run `gulp` from cli)&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;gulp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;task&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;default&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;watch&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;js&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]);&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;run.sh&lt;/code&gt;ç”¨å¯åŠ¨gulpè„šæœ¬ï¼Œå¯¹æœ¬åœ°æ–‡ä»¶è¿›è¡Œç›‘è§†ï¼Œä¸€æ—¦æœ‰æ–‡ä»¶æ”¹åŠ¨ï¼Œç«‹å³æ‰§è¡Œç¼–è¯‘ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;run.sh&lt;/strong&gt;&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span class=&quot;c&quot;&gt;#!/usr/bin/bash&lt;/span&gt;
./node_modules/gulp/bin/gulp.js&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;h2 id=&quot;é•œåƒæ„å»º&quot;&gt;é•œåƒæ„å»º&lt;/h2&gt;

&lt;p&gt;å°†&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Dockerfile&lt;/code&gt;,&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;gulpfile.js&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;run.sh&lt;/code&gt;ä¸‰ä¸ªæ–‡ä»¶æ”¾åœ¨åŒä¸€ç›®å½•ä¸‹ã€‚ è¿è¡Œ&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;docker build -t reactjs-builder-runtime .&lt;/code&gt;&lt;/p&gt;

&lt;h2 id=&quot;è¿è¡Œ&quot;&gt;è¿è¡Œ&lt;/h2&gt;

&lt;p&gt;åœ¨é¡¹ç›®é™æ€æ–‡ä»¶å¤¹ä¸­è¿è¡Œï¼Œè¯·å°†ReactJSé¡¹ç›®å…¥å£æ–‡ä»¶åè®¾ç½®ä¸º&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;app.js&lt;/code&gt;ã€‚ å¦‚æœé¡¹ç›®çš„å…¥å£æ–‡ä»¶ä¸æ˜¯&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;app.js&lt;/code&gt;,å¯ä»¥ä¿®æ”¹&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;gulpfile.js&lt;/code&gt;ä¸­çš„è·¯å¾„è®¾ç½®ã€‚&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;docker run --name project-name-reactjs-builder -v &quot;$PWD&quot;:/runtime/src -d reactjs-builder-runtime&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;æŸ¥çœ‹æ—¥å¿—ï¼š&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;docker logs -f project-name-reactjs-builder&lt;/code&gt;&lt;/p&gt;

&lt;h2 id=&quot;ä»£ç å’Œé•œåƒæ‰˜ç®¡&quot;&gt;ä»£ç å’Œé•œåƒæ‰˜ç®¡&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;é¡¹ç›®ä»£ç æ‰˜ç®¡åœ¨&lt;a href=&quot;https://github.com/yanqiw/reactjs-builder-runtime&quot;&gt;yanqiw/reactjs-builder-runtime&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;é•œåƒæ‰˜ç®¡åœ¨&lt;a href=&quot;https://hub.docker.com/r/yanqiw/reactjs-builder-runtime/&quot;&gt;react-runtime&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;å‚è€ƒæ–‡ç« &quot;&gt;å‚è€ƒæ–‡ç« &lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;TBD&lt;/li&gt;
&lt;/ul&gt;
</description>
        <pubDate>Sat, 05 Mar 2016 08:33:00 +0800</pubDate>
        <link>http://frankwang.cn/docker/2016/03/05/use-docker-build-reactjs.html</link>
        <guid isPermaLink="true">http://frankwang.cn/docker/2016/03/05/use-docker-build-reactjs.html</guid>
        
        
        <category>docker</category>
        
      </item>
    
      <item>
        <title>åœ¨docker containerä¸­å¯åŠ¨å®šæ—¶ä»»åŠ¡</title>
        <description>&lt;h2 id=&quot;è®¾ç½®cron&quot;&gt;è®¾ç½®cron&lt;/h2&gt;

&lt;p&gt;åœ¨Linuxä¸­å®šæ—¶ä»»åŠ¡ä¸€èˆ¬ä½¿ç”¨cronï¼Œubuntuçš„å®˜æ–¹é•œåƒä¸­å·²ç»åŒ…å«äº†cronï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚ä½†æ˜¯å› ä¸ºcronæ˜¯åå°æ‰§è¡Œï¼Œæˆ‘ä»¬è¿˜éœ€è¦å¦å¤–ä¸€ä¸ªè¿›ç¨‹æ¥ä¿æŒcontainerçš„è¿è¡Œã€‚ å¯ä»¥é€šè¿‡ä½¿ç”¨&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;tail -F &lt;/code&gt; ï¼Œæ¥æ£€æµ‹ä¸€äº›logæ–‡ä»¶ä¿æŒè¿›ç¨‹ï¼Œä¹Ÿå¯ä»¥åœ¨containerå¯åŠ¨çš„æ—¶å€™è®¾ç½® &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-restart alwasy&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;p&gt;ä¸‹é¢æ˜¯ä»¥ubuntuä¸ºä¾‹çš„&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Dockerfile&lt;/code&gt;:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-dockerfile&quot; data-lang=&quot;dockerfile&quot;&gt;&lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt;&lt;span class=&quot;s&quot;&gt; ubuntu:14.04&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# å®‰è£…python, è¿™æ­¥å¯ä»¥çœç•¥ï¼Œæˆ–æ·»åŠ å…¶ä»–ä¾èµ–&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;RUN &lt;/span&gt;apt-get update
&lt;span class=&quot;k&quot;&gt;RUN &lt;/span&gt;apt-get &lt;span class=&quot;nb&quot;&gt;install&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-y&lt;/span&gt; python

&lt;span class=&quot;c&quot;&gt;# åˆ›å»ºè„šæœ¬è·¯å¾„&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;RUN &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;mkdir&lt;/span&gt; /code
&lt;span class=&quot;k&quot;&gt;WORKDIR&lt;/span&gt;&lt;span class=&quot;s&quot;&gt; /code&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# å¤åˆ¶è¦è¿è¡Œçš„ä»£ç åˆ°é•œåƒä¸­ï¼ŒåŒ…æ‹¬croné…ç½®æ–‡ä»¶&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;ADD&lt;/span&gt;&lt;span class=&quot;s&quot;&gt; . /code&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# è®¾ç½®cronè„šæœ¬&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;RUN &lt;/span&gt;crontab /code/crontabfile

&lt;span class=&quot;c&quot;&gt;# å®‰è£…rsyslog&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;RUN &lt;/span&gt;apt-get &lt;span class=&quot;nt&quot;&gt;-y&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;rsyslog

&lt;span class=&quot;c&quot;&gt;# å¤åˆ¶crontabfileåˆ°/etc/crontab&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;RUN &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;cp&lt;/span&gt; /code/crontabfile /etc/crontab
&lt;span class=&quot;k&quot;&gt;RUN &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;touch&lt;/span&gt; /var/log/cron.log

&lt;span class=&quot;c&quot;&gt;# å°†run.shè®¾ç½®ä¸ºå¯æ‰§è¡Œ&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;RUN &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;chmod&lt;/span&gt; +x /code/run.sh

&lt;span class=&quot;k&quot;&gt;WORKDIR&lt;/span&gt;&lt;span class=&quot;s&quot;&gt; /code&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;CMD&lt;/span&gt;&lt;span class=&quot;s&quot;&gt; [&quot;bash&quot;,&quot;/code/run.sh&quot;]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;&lt;strong&gt;run.sh&lt;/strong&gt;&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;rsyslogd
cron
&lt;span class=&quot;nb&quot;&gt;touch&lt;/span&gt; /var/log/cron.log
&lt;span class=&quot;nb&quot;&gt;tail&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-F&lt;/span&gt; /var/log/syslog /var/log/cron.log&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;tail -F /var/log/syslog /var/log/cron.log&lt;/code&gt;è¿™é‡Œç”¨æ¥è¾“å‡ºç³»ç»Ÿå’Œcronæ—¥å¿—ï¼Œå¹¶ä¿æŒcontainerè¿è¡Œ&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;crontabfile example&lt;/strong&gt;&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;0 23 &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;  python /code/run.py cron &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; /var/log/cron.log 2&amp;gt;&amp;amp;1&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;python /code/run.py&lt;/code&gt;æ˜¯è¦è¿è¡Œçš„å®šæ—¶ä»»åŠ¡ã€‚å…³äºcroné…ç½®ï¼Œå¯ä»¥å‚è€ƒ&lt;a href=&quot;http://linuxtools-rst.readthedocs.org/zh_CN/latest/tool/crontab.html&quot;&gt;è¿™ç¯‡æ–‡ç« &lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;buildé•œåƒ&quot;&gt;buildé•œåƒ&lt;/h2&gt;

&lt;p&gt;å°†&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Dockerfile&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;run.sh&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;crontabfile&lt;/code&gt; æ”¾åœ¨è„šæœ¬è·Ÿç›®å½•ä¸‹ï¼Œè¿è¡Œ&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;docker build -t your-image-name .&lt;/code&gt;åˆ›å»ºé•œåƒã€‚&lt;/p&gt;

&lt;h2 id=&quot;æµ‹è¯•&quot;&gt;æµ‹è¯•&lt;/h2&gt;

&lt;p&gt;åœ¨è„šæœ¬æ ¹ç›®å½•ä¸‹åˆ›å»º&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;run.py&lt;/code&gt;è„šæœ¬æ¥æµ‹è¯•é•œåƒã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;run.py&lt;/strong&gt;&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;__name__&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'__main__'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;I am running by cron&quot;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;h2 id=&quot;è¿è¡Œ&quot;&gt;è¿è¡Œ&lt;/h2&gt;

&lt;p&gt;åœ¨æœ‰docker enginingçš„æœºå™¨ä¸Šè¿è¡Œ&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;docker run you-image-name&lt;/code&gt;å¯åŠ¨å®šæ—¶ä»»åŠ¡ï¼Œä¹Ÿå¯ä»¥æ ¹æ®å…·ä½“æƒ…å†µæ·»åŠ å…¶ä»–å¯åŠ¨å‚æ•°ã€‚&lt;/p&gt;

&lt;h2 id=&quot;ä»£ç &quot;&gt;ä»£ç &lt;/h2&gt;
&lt;p&gt;æ–‡æœ¬ä»£ç æ‰˜ç®¡åœ¨&lt;a href=&quot;https://github.com/yanqiw/cron-in-docker&quot;&gt;yanqiw/cron-in-docker&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;ä½¿ç”¨å¦‚ä¸‹ä»£ç æ¥å¿«é€Ÿè¿è¡Œä»£ç ï¼š&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;git clone https://github.com/yanqiw/cron-in-docker.git
&lt;span class=&quot;nb&quot;&gt;cd &lt;/span&gt;cron-in-docker
docker build &lt;span class=&quot;nt&quot;&gt;-t&lt;/span&gt; cron-in-docker &lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt;
docker run &lt;span class=&quot;nt&quot;&gt;--rm&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-it&lt;/span&gt; cron-in-docker&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;containerå¯åŠ¨åï¼Œåœ¨æ§åˆ¶å°å¯ä»¥çœ‹åˆ°æ¯åˆ†é’Ÿè¾“å‡ºçš„â€I am running by cronâ€.&lt;/p&gt;

&lt;h2 id=&quot;å‚è€ƒæ–‡ç« &quot;&gt;å‚è€ƒæ–‡ç« &lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/aptible/docker-cron-example&quot;&gt;aptible/docker-cron-example&lt;/a&gt;&lt;/p&gt;
</description>
        <pubDate>Sun, 21 Feb 2016 20:59:49 +0800</pubDate>
        <link>http://frankwang.cn/docker/2016/02/21/schedule-task-in-docker.html</link>
        <guid isPermaLink="true">http://frankwang.cn/docker/2016/02/21/schedule-task-in-docker.html</guid>
        
        
        <category>docker</category>
        
      </item>
    
  </channel>
</rss>
